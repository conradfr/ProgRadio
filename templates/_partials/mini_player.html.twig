<audio id="videoplayer" playsinline="playsinline" style="display:none"></audio>
<script type="text/javascript">
  const PLAYER_STATE_STOPPED = 1;
  const PLAYER_STATE_PLAYING = 3;
  const PLAYER_STATE_LOADING = 42;
</script>
<script type="module">
{% verbatim %}
var fi=Object.defineProperty,di=(t,e,s)=>e in t?fi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,fe=(t,e,s)=>(di(t,typeof e!="symbol"?e+"":e,s),s);function pi(t,e){const s=Object.create(null),i=t.split(",");for(let n=0;n<i.length;n++)s[i[n]]=!0;return n=>!!s[n]}function us(t){if(N(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=ge(i)?vi(i):us(i);if(n)for(const a in n)e[a]=n[a]}return e}else if(ge(t)||ae(t))return t}const mi=/;(?![^(]*\))/g,gi=/:(.+)/;function vi(t){const e={};return t.split(mi).forEach(s=>{if(s){const i=s.split(gi);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function hs(t){let e="";if(ge(t))e=t;else if(N(t))for(let s=0;s<t.length;s++){const i=hs(t[s]);i&&(e+=i+" ")}else if(ae(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}function Si(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=me(t[i],e[i]);return s}function me(t,e){if(t===e)return!0;let s=Bt(t),i=Bt(e);if(s||i)return s&&i?t.getTime()===e.getTime():!1;if(s=N(t),i=N(e),s||i)return s&&i?Si(t,e):!1;if(s=ae(t),i=ae(e),s||i){if(!s||!i)return!1;const n=Object.keys(t).length,a=Object.keys(e).length;if(n!==a)return!1;for(const l in t){const u=t.hasOwnProperty(l),f=e.hasOwnProperty(l);if(u&&!f||!u&&f||!me(t[l],e[l]))return!1}}return String(t)===String(e)}function it(t,e){return t.findIndex(s=>me(s,e))}const bi=Object.assign,wi=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Ei=Object.prototype.hasOwnProperty,yt=(t,e)=>Ei.call(t,e),N=Array.isArray,nt=t=>fs(t)==="[object Map]",Bt=t=>t instanceof Date,ge=t=>typeof t=="string",Ct=t=>typeof t=="symbol",ae=t=>t!==null&&typeof t=="object",yi=Object.prototype.toString,fs=t=>yi.call(t),Ci=t=>fs(t).slice(8,-1),xt=t=>ge(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ds=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},xi=/-(\w)/g,ki=ds(t=>t.replace(xi,(e,s)=>s?s.toUpperCase():"")),_i=/\B([A-Z])/g,ps=ds(t=>t.replace(_i,"-$1").toLowerCase()),Ai=(t,e)=>!Object.is(t,e),zt=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ti;function ms(t,e){e=e||Ti,e&&e.active&&e.effects.push(t)}const gs=t=>{const e=new Set(t);return e.w=0,e.n=0,e},vs=t=>(t.w&le)>0,Ss=t=>(t.n&le)>0,Pi=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=le},Ri=t=>{const{deps:e}=t;if(e.length){let s=0;for(let i=0;i<e.length;i++){const n=e[i];vs(n)&&!Ss(n)?n.delete(t):e[s++]=n,n.w&=~le,n.n&=~le}e.length=s}},at=new WeakMap;let Ce=0,le=1;const lt=30,we=[];let de;const Me=Symbol(""),Ft=Symbol("");class ji{constructor(e,s=null,i){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],ms(this,i)}run(){if(!this.active)return this.fn();if(!we.includes(this))try{return we.push(de=this),Mi(),le=1<<++Ce,Ce<=lt?Pi(this):Wt(this),this.fn()}finally{Ce<=lt&&Ri(this),le=1<<--Ce,bs(),we.pop();const e=we.length;de=e>0?we[e-1]:void 0}}stop(){this.active&&(Wt(this),this.onStop&&this.onStop(),this.active=!1)}}function Wt(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}function Oi(t,e){t.effect&&(t=t.effect.fn);const s=new ji(t);e&&(bi(s,e),e.scope&&ms(s,e.scope)),(!e||!e.lazy)&&s.run();const i=s.run.bind(s);return i.effect=s,i}function Li(t){t.effect.stop()}let ve=!0;const kt=[];function $i(){kt.push(ve),ve=!1}function Mi(){kt.push(ve),ve=!0}function bs(){const t=kt.pop();ve=t===void 0?!0:t}function Ve(t,e,s){if(!Di())return;let i=at.get(t);i||at.set(t,i=new Map);let n=i.get(s);n||i.set(s,n=gs()),Ui(n)}function Di(){return ve&&de!==void 0}function Ui(t,e){let s=!1;Ce<=lt?Ss(t)||(t.n|=le,s=!vs(t)):s=!t.has(de),s&&(t.add(de),de.deps.push(t))}function ct(t,e,s,i,n,a){const l=at.get(t);if(!l)return;let u=[];if(e==="clear")u=[...l.values()];else if(s==="length"&&N(t))l.forEach((f,d)=>{(d==="length"||d>=i)&&u.push(f)});else switch(s!==void 0&&u.push(l.get(s)),e){case"add":N(t)?xt(s)&&u.push(l.get("length")):(u.push(l.get(Me)),nt(t)&&u.push(l.get(Ft)));break;case"delete":N(t)||(u.push(l.get(Me)),nt(t)&&u.push(l.get(Ft)));break;case"set":nt(t)&&u.push(l.get(Me));break}if(u.length===1)u[0]&&Kt(u[0]);else{const f=[];for(const d of u)d&&f.push(...d);Kt(gs(f))}}function Kt(t,e){for(const s of N(t)?t:[...t])(s!==de||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const Hi=pi("__proto__,__v_isRef,__isVue"),ws=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Ct)),Ni=Es(),Ii=Es(!0),Gt=Vi();function Vi(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const i=pe(this);for(let a=0,l=this.length;a<l;a++)Ve(i,"get",a+"");const n=i[e](...s);return n===-1||n===!1?i[e](...s.map(pe)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){$i();const i=pe(this)[e].apply(this,s);return bs(),i}}),t}function Es(t=!1,e=!1){return function(s,i,n){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_raw"&&n===(t?e?Xi:Cs:e?qi:ys).get(s))return s;const a=N(s);if(!t&&a&&yt(Gt,i))return Reflect.get(Gt,i,n);const l=Reflect.get(s,i,n);return(Ct(i)?ws.has(i):Hi(i))||(t||Ve(s,"get",i),e)?l:ut(l)?!a||!xt(i)?l.value:l:ae(l)?t?Qi(l):Be(l):l}}const Bi=zi();function zi(t=!1){return function(e,s,i,n){let a=e[s];if(!t&&!en(i)&&(i=pe(i),a=pe(a),!N(e)&&ut(a)&&!ut(i)))return a.value=i,!0;const l=N(e)&&xt(s)?Number(s)<e.length:yt(e,s),u=Reflect.set(e,s,i,n);return e===pe(n)&&(l?Ai(i,a)&&ct(e,"set",s,i):ct(e,"add",s,i)),u}}function Fi(t,e){const s=yt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&ct(t,"delete",e,void 0),i}function Wi(t,e){const s=Reflect.has(t,e);return(!Ct(e)||!ws.has(e))&&Ve(t,"has",e),s}function Ki(t){return Ve(t,"iterate",N(t)?"length":Me),Reflect.ownKeys(t)}const Gi={get:Ni,set:Bi,deleteProperty:Fi,has:Wi,ownKeys:Ki},Ji={get:Ii,set(t,e){return!0},deleteProperty(t,e){return!0}},ys=new WeakMap,qi=new WeakMap,Cs=new WeakMap,Xi=new WeakMap;function Yi(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zi(t){return t.__v_skip||!Object.isExtensible(t)?0:Yi(Ci(t))}function Be(t){return t&&t.__v_isReadonly?t:xs(t,!1,Gi,null,ys)}function Qi(t){return xs(t,!0,Ji,null,Cs)}function xs(t,e,s,i,n){if(!ae(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=n.get(t);if(a)return a;const l=Zi(t);if(l===0)return t;const u=new Proxy(t,l===2?i:s);return n.set(t,u),u}function en(t){return!!(t&&t.__v_isReadonly)}function pe(t){const e=t&&t.__v_raw;return e?pe(e):t}function ut(t){return!!(t&&t.__v_isRef===!0)}Promise.resolve();let ht=!1;const Ue=[],tn=Promise.resolve(),ze=t=>tn.then(t),Jt=t=>{Ue.includes(t)||Ue.push(t),ht||(ht=!0,ze(sn))},sn=()=>{for(const t of Ue)t();Ue.length=0,ht=!1},nn=/^(spellcheck|draggable|form|list|type)$/,ft=({el:t,get:e,effect:s,arg:i,modifiers:n})=>{let a;i==="class"&&(t._class=t.className),s(()=>{let l=e();if(i)n!=null&&n.camel&&(i=ki(i)),rt(t,i,l,a);else{for(const u in l)rt(t,u,l[u],a&&a[u]);for(const u in a)(!l||!(u in l))&&rt(t,u,null)}a=l})},rt=(t,e,s,i)=>{if(e==="class")t.setAttribute("class",hs(t._class?[t._class,s]:s)||"");else if(e==="style"){s=us(s);const{style:n}=t;if(!s)t.removeAttribute("style");else if(ge(s))s!==i&&(n.cssText=s);else{for(const a in s)dt(n,a,s[a]);if(i&&!ge(i))for(const a in i)s[a]==null&&dt(n,a,"")}}else!(t instanceof SVGElement)&&e in t&&!nn.test(e)?(t[e]=s,e==="value"&&(t._value=s)):e==="true-value"?t._trueValue=s:e==="false-value"?t._falseValue=s:s!=null?t.setAttribute(e,s):t.removeAttribute(e)},qt=/\s*!important$/,dt=(t,e,s)=>{N(s)?s.forEach(i=>dt(t,e,i)):e.startsWith("--")?t.setProperty(e,s):qt.test(s)?t.setProperty(ps(e),s.replace(qt,""),"important"):t[e]=s},re=(t,e)=>{const s=t.getAttribute(e);return s!=null&&t.removeAttribute(e),s},ne=(t,e,s,i)=>{t.addEventListener(e,s,i)},rn=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,on=["ctrl","shift","alt","meta"],an={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>on.some(s=>t[`${s}Key`]&&!e[s])},ks=({el:t,get:e,exp:s,arg:i,modifiers:n})=>{if(!i)return;let a=rn.test(s)?e(`(e => ${s}(e))`):e(`($event => { ${s} })`);if(i==="vue:mounted"){ze(a);return}else if(i==="vue:unmounted")return()=>a();if(n){i==="click"&&(n.right&&(i="contextmenu"),n.middle&&(i="mouseup"));const l=a;a=u=>{if(!("key"in u&&!(ps(u.key)in n))){for(const f in n){const d=an[f];if(d&&d(u,n))return}return l(u)}}}ne(t,i,a,n)},ln=({el:t,get:e,effect:s})=>{const i=t.style.display;s(()=>{t.style.display=e()?i:"none"})},_s=({el:t,get:e,effect:s})=>{s(()=>{t.textContent=As(e())})},As=t=>t==null?"":ae(t)?JSON.stringify(t,null,2):String(t),cn=({el:t,get:e,effect:s})=>{s(()=>{t.innerHTML=e()})},un=({el:t,exp:e,get:s,effect:i,modifiers:n})=>{const a=t.type,l=s(`(val) => { ${e} = val }`),{trim:u,number:f=a==="number"}=n||{};if(t.tagName==="SELECT"){const d=t;ne(t,"change",()=>{const v=Array.prototype.filter.call(d.options,b=>b.selected).map(b=>f?zt(se(b)):se(b));l(d.multiple?v:v[0])}),i(()=>{const v=s(),b=d.multiple;for(let C=0,w=d.options.length;C<w;C++){const _=d.options[C],E=se(_);if(b)N(v)?_.selected=it(v,E)>-1:_.selected=v.has(E);else if(me(se(_),v)){d.selectedIndex!==C&&(d.selectedIndex=C);return}}!b&&d.selectedIndex!==-1&&(d.selectedIndex=-1)})}else if(a==="checkbox"){ne(t,"change",()=>{const v=s(),b=t.checked;if(N(v)){const C=se(t),w=it(v,C),_=w!==-1;if(b&&!_)l(v.concat(C));else if(!b&&_){const E=[...v];E.splice(w,1),l(E)}}else l(Xt(t,b))});let d;i(()=>{const v=s();N(v)?t.checked=it(v,se(t))>-1:v!==d&&(t.checked=me(v,Xt(t,!0))),d=v})}else if(a==="radio"){ne(t,"change",()=>{l(se(t))});let d;i(()=>{const v=s();v!==d&&(t.checked=me(v,se(t)))})}else{const d=v=>u?v.trim():f?zt(v):v;ne(t,"compositionstart",hn),ne(t,"compositionend",fn),ne(t,n!=null&&n.lazy?"change":"input",()=>{t.composing||l(d(t.value))}),u&&ne(t,"change",()=>{t.value=t.value.trim()}),i(()=>{if(t.composing)return;const v=t.value,b=s();document.activeElement===t&&d(v)===b||v!==b&&(t.value=b)})}},se=t=>"_value"in t?t._value:t.value,Xt=(t,e)=>{const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e},hn=t=>{t.target.composing=!0},fn=t=>{const e=t.target;e.composing&&(e.composing=!1,dn(e,"input"))},dn=(t,e)=>{const s=document.createEvent("HTMLEvents");s.initEvent(e,!0,!0),t.dispatchEvent(s)},Yt=Object.create(null),Ae=(t,e,s)=>Ts(t,`return(${e})`,s),Ts=(t,e,s)=>{const i=Yt[e]||(Yt[e]=pn(e));try{return i(t,s)}catch(n){console.error(n)}},pn=t=>{try{return new Function("$data","$el",`with($data){${t}}`)}catch(e){return console.error(`${e.message} in expression: ${t}`),()=>{}}},mn=({el:t,ctx:e,exp:s,effect:i})=>{ze(()=>i(()=>Ts(e.scope,s,t)))},gn={bind:ft,on:ks,show:ln,text:_s,html:cn,model:un,effect:mn},vn=(t,e,s)=>{const i=t.parentElement,n=new Comment("v-if");i.insertBefore(n,t);const a=[{exp:e,el:t}];let l,u;for(;(l=t.nextElementSibling)&&(u=null,re(l,"v-else")===""||(u=re(l,"v-else-if")));)i.removeChild(l),a.push({exp:u,el:l});const f=t.nextSibling;i.removeChild(t);let d,v=-1;const b=()=>{d&&(i.insertBefore(n,d.el),d.remove(),d=void 0)};return s.effect(()=>{for(let C=0;C<a.length;C++){const{exp:w,el:_}=a[C];if(!w||Ae(s.scope,w)){C!==v&&(b(),d=new _t(_,s),d.insert(i,n),i.removeChild(n),v=C);return}}v=-1,b()}),f},Sn=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Zt=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,bn=/^\(|\)$/g,wn=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,En=(t,e,s)=>{const i=e.match(Sn);if(!i)return;const n=t.nextSibling,a=t.parentElement,l=new Text("");a.insertBefore(l,t),a.removeChild(t);const u=i[2].trim();let f=i[1].trim().replace(bn,"").trim(),d,v=!1,b,C,w="key",_=t.getAttribute(w)||t.getAttribute(w=":key")||t.getAttribute(w="v-bind:key");_&&(t.removeAttribute(w),w==="key"&&(_=JSON.stringify(_)));let E;(E=f.match(Zt))&&(f=f.replace(Zt,"").trim(),b=E[1].trim(),E[2]&&(C=E[2].trim())),(E=f.match(wn))&&(d=E[1].split(",").map($=>$.trim()),v=f[0]==="[");let U=!1,G,z,Y;const Q=$=>{const R=new Map,O=[];if(N($))for(let P=0;P<$.length;P++)O.push(ee(R,$[P],P));else if(typeof $=="number")for(let P=0;P<$;P++)O.push(ee(R,P+1,P));else if(ae($)){let P=0;for(const M in $)O.push(ee(R,$[M],P++,M))}return[O,R]},ee=($,R,O,P)=>{const M={};d?d.forEach((q,K)=>M[q]=R[v?K:q]):M[f]=R,P?(b&&(M[b]=P),C&&(M[C]=O)):b&&(M[b]=O);const te=Os(s,M),F=_?Ae(te.scope,_):O;return $.set(F,O),te.key=F,te},ce=($,R)=>{const O=new _t(t,$);return O.key=$.key,O.insert(a,R),O};return s.effect(()=>{const $=Ae(s.scope,u),R=Y;if([z,Y]=Q($),!U)G=z.map(O=>ce(O,l)),U=!0;else{for(let F=0;F<G.length;F++)Y.has(G[F].key)||G[F].remove();const O=[];let P=z.length,M,te;for(;P--;){const F=z[P],q=R.get(F.key);let K;q==null?K=ce(F,M?M.el:l):(K=G[q],Object.assign(K.ctx.scope,F.scope),q!==P&&(G[q+1]!==M||te===M)&&(te=K,K.insert(a,M?M.el:l))),O.unshift(M=K)}G=O}}),n},Ps=({el:t,ctx:{scope:{$refs:e}},get:s,effect:i})=>{let n;return i(()=>{const a=s();e[a]=t,n&&a!==n&&delete e[n],n=a}),()=>{n&&delete e[n]}},yn=/^(?:v-|:|@)/,Cn=/\.([\w-]+)/g;let pt=!1;const Rs=(t,e)=>{const s=t.nodeType;if(s===1){const i=t;if(i.hasAttribute("v-pre"))return;re(i,"v-cloak");let n;if(n=re(i,"v-if"))return vn(i,n,e);if(n=re(i,"v-for"))return En(i,n,e);if((n=re(i,"v-scope"))||n===""){const u=n?Ae(e.scope,n):{};e=Os(e,u),u.$template&&xn(i,u.$template)}const a=re(i,"v-once")!=null;a&&(pt=!0),(n=re(i,"ref"))&&mt(i,Ps,`"${n}"`,e),Qt(i,e);const l=[];for(const{name:u,value:f}of[...i.attributes])yn.test(u)&&u!=="v-cloak"&&(u==="v-model"?l.unshift([u,f]):u[0]==="@"||/^v-on\b/.test(u)?l.push([u,f]):es(i,u,f,e));for(const[u,f]of l)es(i,u,f,e);a&&(pt=!1)}else if(s===3){const i=t.data;if(i.includes(e.delimiters[0])){let n=[],a=0,l;for(;l=e.delimitersRE.exec(i);){const u=i.slice(a,l.index);u&&n.push(JSON.stringify(u)),n.push(`$s(${l[1]})`),a=l.index+l[0].length}a<i.length&&n.push(JSON.stringify(i.slice(a))),mt(t,_s,n.join("+"),e)}}else s===11&&Qt(t,e)},Qt=(t,e)=>{let s=t.firstChild;for(;s;)s=Rs(s,e)||s.nextSibling},es=(t,e,s,i)=>{let n,a,l;if(e=e.replace(Cn,(u,f)=>((l||(l={}))[f]=!0,"")),e[0]===":")n=ft,a=e.slice(1);else if(e[0]==="@")n=ks,a=e.slice(1);else{const u=e.indexOf(":"),f=u>0?e.slice(2,u):e.slice(2);n=gn[f]||i.dirs[f],a=u>0?e.slice(u+1):void 0}n&&(n===ft&&a==="ref"&&(n=Ps),mt(t,n,s,i,a,l),t.removeAttribute(e))},mt=(t,e,s,i,n,a)=>{const l=e({el:t,get:(u=s)=>Ae(i.scope,u,t),effect:i.effect,ctx:i,exp:s,arg:n,modifiers:a});l&&i.cleanups.push(l)},xn=(t,e)=>{if(e[0]==="#"){const s=document.querySelector(e);t.appendChild(s.content.cloneNode(!0));return}t.innerHTML=e},js=t=>{const e={delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,...t,scope:t?t.scope:Be({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:s=>{if(pt)return Jt(s),s;const i=Oi(s,{scheduler:()=>Jt(i)});return e.effects.push(i),i}};return e},Os=(t,e={})=>{const s=t.scope,i=Object.create(s);Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),i.$refs=Object.create(s.$refs);const n=Be(new Proxy(i,{set(a,l,u,f){return f===n&&!a.hasOwnProperty(l)?Reflect.set(s,l,u):Reflect.set(a,l,u,f)}}));return Ls(n),{...t,scope:n}},Ls=t=>{for(const e of Object.keys(t))typeof t[e]=="function"&&(t[e]=t[e].bind(t))};class _t{constructor(e,s,i=!1){fe(this,"template"),fe(this,"ctx"),fe(this,"key"),fe(this,"parentCtx"),fe(this,"isFragment"),fe(this,"start"),fe(this,"end"),this.isFragment=e instanceof HTMLTemplateElement,i?this.template=e:this.isFragment?this.template=e.content.cloneNode(!0):this.template=e.cloneNode(!0),i?this.ctx=s:(this.parentCtx=s,s.blocks.push(this),this.ctx=js(s)),Rs(this.template,this.ctx)}get el(){return this.start||this.template}insert(e,s=null){if(this.isFragment)if(this.start){let i=this.start,n;for(;i&&(n=i.nextSibling,e.insertBefore(i,s),i!==this.end);)i=n}else this.start=new Text(""),this.end=new Text(""),e.insertBefore(this.end,s),e.insertBefore(this.start,this.end),e.insertBefore(this.template,this.end);else e.insertBefore(this.template,s)}remove(){if(this.parentCtx&&wi(this.parentCtx.blocks,this),this.start){const e=this.start.parentNode;let s=this.start,i;for(;s&&(i=s.nextSibling,e.removeChild(s),s!==this.end);)s=i}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(e=>{e.teardown()}),this.ctx.effects.forEach(Li),this.ctx.cleanups.forEach(e=>e())}}const ts=t=>t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&"),$s=t=>{const e=js();if(t&&(e.scope=Be(t),Ls(e.scope),t.$delimiters)){const[i,n]=e.delimiters=t.$delimiters;e.delimitersRE=new RegExp(ts(i)+"([^]+?)"+ts(n),"g")}e.scope.$s=As,e.scope.$nextTick=ze,e.scope.$refs=Object.create(null);let s;return{directive(i,n){return n?(e.dirs[i]=n,this):e.dirs[i]},mount(i){if(typeof i=="string"&&(i=document.querySelector(i),!i))return;i=i||document.documentElement;let n;return i.hasAttribute("v-scope")?n=[i]:n=[...i.querySelectorAll("[v-scope]")].filter(a=>!a.matches("[v-scope] [v-scope]")),n.length||(n=[i]),s=n.map(a=>new _t(a,e,!0)),this},unmount(){s.forEach(i=>i.teardown())}}},ss=document.currentScript;ss&&ss.hasAttribute("init")&&$s().mount();const kn="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=250,left=150,top=150",_n="123",An="progradio_v4",Tn="31536000",He={path:"/","max-age":Tn,expires:"mage-age",secure:!0,SameSite:"Lax"},gt=`${An}-volume`,Pn=36e6,Rn=50,jn=5e4,On=15,Ln="seo",Oe=1,$n=3,Mn=42,Dn="programmes-radio.com",Un="radio-addict.com",Ms=t=>!!document.cookie.split(";").some(e=>e==null?void 0:e.trim().startsWith(`${t}=`)),Hn=t=>{document.cookie=`${t}=;path=${He.path};SameSite=${He.SameSite};secure=true;expires=Thu, 01 Jan 1970 00:00:01 GMT`},Ds=(t,e=null)=>Ms(t)?document.cookie.split("; ").find(s=>s.startsWith(`${t}=`)).split("=")[1]:e,Nn=(t,e=null)=>{const s=Ds(t,e);if(s!==null&&s!==e){let i=null;try{i=JSON.parse(s)}catch{}return i}return s},In=(t,e,s)=>{let i=He;s!=null&&(i=Object.assign(He,s)),i=Object.keys(i).map(a=>`;${a}=${i[a]}`).join("");const n=typeof e=="object"?JSON.stringify(e):e;document.cookie=`${t}=${n}${i}`},vt={has:Ms,get:Ds,getJson:Nn,set:In,remove:Hn};let ke=t=>typeof t=="function"?t:function(){return t};const Vn=typeof self<"u"?self:null,xe=typeof window<"u"?window:null,_e=Vn||xe||_e,Bn="2.0.0",X={connecting:0,open:1,closing:2,closed:3},zn=1e4,Fn=1e3,W={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Z={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},St={longpoll:"longpoll",websocket:"websocket"},Wn={complete:4};class Le{constructor(e,s,i,n){this.channel=e,this.event=s,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=n,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,s){return this.hasReceived(e)&&s(this.receivedResp.response),this.recHooks.push({status:e,callback:s}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:s,_ref:i}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,s){this.channel.trigger(this.refEvent,{status:e,response:s})}}class Us{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Kn{constructor(e,s,i){this.state=W.closed,this.topic=e,this.params=ke(s||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Le(this,Z.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Us(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=W.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=W.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=W.closed,this.socket.remove(this)}),this.onError(n=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,n),this.isJoining()&&this.joinPush.reset(),this.state=W.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Le(this,Z.leave,ke({}),this.timeout).send(),this.state=W.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Z.reply,(n,a)=>{this.trigger(this.replyEventName(a),n)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(Z.close,e)}onError(e){return this.on(Z.error,s=>e(s))}on(e,s){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:s}),i}off(e,s){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof s>"u"||s===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,s,i=this.timeout){if(s=s||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let n=new Le(this,e,function(){return s},i);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=W.leaving;let s=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Z.close,"leave")},i=new Le(this,Z.leave,ke({}),e);return i.receive("ok",()=>s()).receive("timeout",()=>s()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,s,i){return s}isMember(e,s,i,n){return this.topic!==e?!1:n&&n!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:s,payload:i,joinRef:n}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=W.joining,this.joinPush.resend(e))}trigger(e,s,i,n){let a=this.onMessage(e,s,i,n);if(s&&!a)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let l=this.bindings.filter(u=>u.event===e);for(let u=0;u<l.length;u++)l[u].callback(a,i,n||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===W.closed}isErrored(){return this.state===W.errored}isJoined(){return this.state===W.joined}isJoining(){return this.state===W.joining}isLeaving(){return this.state===W.leaving}}class Ne{static request(e,s,i,n,a,l,u){if(_e.XDomainRequest){let f=new _e.XDomainRequest;return this.xdomainRequest(f,e,s,n,a,l,u)}else{let f=new _e.XMLHttpRequest;return this.xhrRequest(f,e,s,i,n,a,l,u)}}static xdomainRequest(e,s,i,n,a,l,u){return e.timeout=a,e.open(s,i),e.onload=()=>{let f=this.parseJSON(e.responseText);u&&u(f)},l&&(e.ontimeout=l),e.onprogress=()=>{},e.send(n),e}static xhrRequest(e,s,i,n,a,l,u,f){return e.open(s,i,!0),e.timeout=l,e.setRequestHeader("Content-Type",n),e.onerror=()=>f&&f(null),e.onreadystatechange=()=>{if(e.readyState===Wn.complete&&f){let d=this.parseJSON(e.responseText);f(d)}},u&&(e.ontimeout=u),e.send(a),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,s){let i=[];for(var n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let a=s?`${s}[${n}]`:n,l=e[n];typeof l=="object"?i.push(this.serialize(l,a)):i.push(encodeURIComponent(a)+"="+encodeURIComponent(l))}return i.join("&")}static appendParams(e,s){if(Object.keys(s).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(s)}`}}class ot{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=X.connecting,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+St.websocket),"$1/"+St.longpoll)}endpointURL(){return Ne.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,s,i){this.close(e,s,i),this.readyState=X.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===X.open||this.readyState===X.connecting}poll(){this.ajax("GET",null,()=>this.ontimeout(),e=>{if(e){var{status:s,token:i,messages:n}=e;this.token=i}else s=0;switch(s){case 200:n.forEach(a=>{setTimeout(()=>this.onmessage({data:a}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=X.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${s}`)}})}send(e){this.ajax("POST",e,()=>this.onerror("timeout"),s=>{(!s||s.status!==200)&&(this.onerror(s&&s.status),this.closeAndRetry(1011,"internal server error",!1))})}close(e,s,i){for(let a of this.reqs)a.abort();this.readyState=X.closed;let n=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:s,wasClean:i});typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",n)):this.onclose(n)}ajax(e,s,i,n){let a,l=()=>{this.reqs.delete(a),i()};a=Ne.request(e,this.endpointURL(),"application/json",s,this.timeout,l,u=>{this.reqs.delete(a),this.isActive()&&n(u)}),this.reqs.add(a)}}const $e={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(t,e){if(t.payload.constructor===ArrayBuffer)return e(this.binaryEncode(t));{let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(s))}},decode(t,e){if(t.constructor===ArrayBuffer)return e(this.binaryDecode(t));{let[s,i,n,a,l]=JSON.parse(t);return e({join_ref:s,ref:i,topic:n,event:a,payload:l})}},binaryEncode(t){let{join_ref:e,ref:s,event:i,topic:n,payload:a}=t,l=this.META_LENGTH+e.length+s.length+n.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+l),f=new DataView(u),d=0;f.setUint8(d++,this.KINDS.push),f.setUint8(d++,e.length),f.setUint8(d++,s.length),f.setUint8(d++,n.length),f.setUint8(d++,i.length),Array.from(e,b=>f.setUint8(d++,b.charCodeAt(0))),Array.from(s,b=>f.setUint8(d++,b.charCodeAt(0))),Array.from(n,b=>f.setUint8(d++,b.charCodeAt(0))),Array.from(i,b=>f.setUint8(d++,b.charCodeAt(0)));var v=new Uint8Array(u.byteLength+a.byteLength);return v.set(new Uint8Array(u),0),v.set(new Uint8Array(a),u.byteLength),v.buffer},binaryDecode(t){let e=new DataView(t),s=e.getUint8(0),i=new TextDecoder;switch(s){case this.KINDS.push:return this.decodePush(t,e,i);case this.KINDS.reply:return this.decodeReply(t,e,i);case this.KINDS.broadcast:return this.decodeBroadcast(t,e,i)}},decodePush(t,e,s){let i=e.getUint8(1),n=e.getUint8(2),a=e.getUint8(3),l=this.HEADER_LENGTH+this.META_LENGTH-1,u=s.decode(t.slice(l,l+i));l=l+i;let f=s.decode(t.slice(l,l+n));l=l+n;let d=s.decode(t.slice(l,l+a));l=l+a;let v=t.slice(l,t.byteLength);return{join_ref:u,ref:null,topic:f,event:d,payload:v}},decodeReply(t,e,s){let i=e.getUint8(1),n=e.getUint8(2),a=e.getUint8(3),l=e.getUint8(4),u=this.HEADER_LENGTH+this.META_LENGTH,f=s.decode(t.slice(u,u+i));u=u+i;let d=s.decode(t.slice(u,u+n));u=u+n;let v=s.decode(t.slice(u,u+a));u=u+a;let b=s.decode(t.slice(u,u+l));u=u+l;let C=t.slice(u,t.byteLength),w={status:b,response:C};return{join_ref:f,ref:d,topic:v,event:Z.reply,payload:w}},decodeBroadcast(t,e,s){let i=e.getUint8(1),n=e.getUint8(2),a=this.HEADER_LENGTH+2,l=s.decode(t.slice(a,a+i));a=a+i;let u=s.decode(t.slice(a,a+n));a=a+n;let f=t.slice(a,t.byteLength);return{join_ref:null,ref:null,topic:l,event:u,payload:f}}};class Gn{constructor(e,s={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=s.timeout||zn,this.transport=s.transport||_e.WebSocket||ot,this.establishedConnections=0,this.defaultEncoder=$e.encode.bind($e),this.defaultDecoder=$e.decode.bind($e),this.closeWasClean=!1,this.binaryType=s.binaryType||"arraybuffer",this.connectClock=1,this.transport!==ot?(this.encode=s.encode||this.defaultEncoder,this.decode=s.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;xe&&xe.addEventListener&&(xe.addEventListener("pagehide",n=>{this.conn&&(this.disconnect(),i=this.connectClock)}),xe.addEventListener("pageshow",n=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=s.heartbeatIntervalMs||3e4,this.rejoinAfterMs=n=>s.rejoinAfterMs?s.rejoinAfterMs(n):[1e3,2e3,5e3][n-1]||1e4,this.reconnectAfterMs=n=>s.reconnectAfterMs?s.reconnectAfterMs(n):[10,50,100,150,200,250,500,1e3,2e3][n-1]||5e3,this.logger=s.logger||null,this.longpollerTimeout=s.longpollerTimeout||2e4,this.params=ke(s.params||{}),this.endPoint=`${e}/${St.websocket}`,this.vsn=s.vsn||Bn,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Us(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return ot}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=Ne.appendParams(Ne.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,s,i){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,s,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=ke(e)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=s=>this.onConnError(s),this.conn.onmessage=s=>this.onConnMessage(s),this.conn.onclose=s=>this.onConnClose(s))}log(e,s,i){this.logger(e,s,i)}hasLogger(){return this.logger!==null}onOpen(e){let s=this.makeRef();return this.stateChangeCallbacks.open.push([s,e]),s}onClose(e){let s=this.makeRef();return this.stateChangeCallbacks.close.push([s,e]),s}onError(e){let s=this.makeRef();return this.stateChangeCallbacks.error.push([s,e]),s}onMessage(e){let s=this.makeRef();return this.stateChangeCallbacks.message.push([s,e]),s}ping(e){if(!this.isConnected())return!1;let s=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:s});let n=this.onMessage(a=>{a.ref===s&&(this.off([n]),e(Date.now()-i))});return!0}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,s,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(s?this.conn.close(s,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,s=1){if(s===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,s+1)},150*s)}waitForSocketClosed(e,s=1){if(s===5||!this.conn||this.conn.readyState===X.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,s+1)},150*s)}onConnClose(e){let s=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearTimeout(this.heartbeatTimer),!this.closeWasClean&&s!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let s=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,n])=>{n(e,s,i)}),(s===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(Z.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case X.connecting:return"connecting";case X.open:return"open";case X.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(s=>s.joinRef()!==e.joinRef())}off(e){for(let s in this.stateChangeCallbacks)this.stateChangeCallbacks[s]=this.stateChangeCallbacks[s].filter(([i])=>e.indexOf(i)===-1)}channel(e,s={}){let i=new Kn(e,s,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:s,event:i,payload:n,ref:a,join_ref:l}=e;this.log("push",`${s} ${i} (${l}, ${a})`,n)}this.isConnected()?this.encode(e,s=>this.conn.send(s)):this.sendBuffer.push(()=>this.encode(e,s=>this.conn.send(s)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}abnormalClose(e){this.closeWasClean=!1,this.isConnected()&&this.conn.close(Fn,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,s=>{let{topic:i,event:n,payload:a,ref:l,join_ref:u}=s;l&&l===this.pendingHeartbeatRef&&(clearTimeout(this.heartbeatTimer),this.pendingHeartbeatRef=null,setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${a.status||""} ${i} ${n} ${l&&"("+l+")"||""}`,a);for(let f=0;f<this.channels.length;f++){const d=this.channels[f];d.isMember(i,n,a,u)&&d.trigger(n,a,l,u)}for(let f=0;f<this.stateChangeCallbacks.message.length;f++){let[,d]=this.stateChangeCallbacks.message[f];d(s)}})}leaveOpenTopic(e){let s=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));s&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),s.leave())}}var oe;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(oe||(oe={}));var B;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(B||(B={}));function Jn(t){return Ie(t)&&typeof t.from=="function"}function Ie(t){return typeof t=="object"&&typeof t.to=="function"}function is(t){t.parentElement.removeChild(t)}function bt(t){return t!=null}function ns(t){t.preventDefault()}function qn(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function Xn(t,e){return Math.round(t/e)*e}function Yn(t,e){var s=t.getBoundingClientRect(),i=t.ownerDocument,n=i.documentElement,a=Hs(i);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),e?s.top+a.y-n.clientTop:s.left+a.x-n.clientLeft}function J(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function rs(t,e,s){s>0&&(V(t,e),setTimeout(function(){De(t,e)},s))}function os(t){return Math.max(Math.min(t,100),0)}function Fe(t){return Array.isArray(t)?t:[t]}function Zn(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function V(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function De(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function Qn(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function Hs(t){var e=window.pageXOffset!==void 0,s=(t.compatMode||"")==="CSS1Compat",i=e?window.pageXOffset:s?t.documentElement.scrollLeft:t.body.scrollLeft,n=e?window.pageYOffset:s?t.documentElement.scrollTop:t.body.scrollTop;return{x:i,y:n}}function er(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function tr(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch{}return t}function sr(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function At(t,e){return 100/(e-t)}function wt(t,e,s){return e*100/(t[s+1]-t[s])}function ir(t,e){return wt(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function nr(t,e){return e*(t[1]-t[0])/100+t[0]}function Te(t,e){for(var s=1;t>=e[s];)s+=1;return s}function rr(t,e,s){if(s>=t.slice(-1)[0])return 100;var i=Te(s,t),n=t[i-1],a=t[i],l=e[i-1],u=e[i];return l+ir([n,a],s)/At(l,u)}function or(t,e,s){if(s>=100)return t.slice(-1)[0];var i=Te(s,e),n=t[i-1],a=t[i],l=e[i-1],u=e[i];return nr([n,a],(s-l)*At(l,u))}function ar(t,e,s,i){if(i===100)return i;var n=Te(i,t),a=t[n-1],l=t[n];return s?i-a>(l-a)/2?l:a:e[n-1]?t[n-1]+Xn(i-t[n-1],e[n-1]):i}var Ns=(function(){function t(e,s,i){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[i||!1],this.xNumSteps=[!1],this.snap=s;var n,a=[];for(Object.keys(e).forEach(function(l){a.push([Fe(e[l]),l])}),a.sort(function(l,u){return l[0][0]-u[0][0]}),n=0;n<a.length;n++)this.handleEntryPoint(a[n][1],a[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}return t.prototype.getDistance=function(e){for(var s=[],i=0;i<this.xNumSteps.length-1;i++)s[i]=wt(this.xVal,e,i);return s},t.prototype.getAbsoluteDistance=function(e,s,i){var n=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[n+1];)n++;else e===this.xPct[this.xPct.length-1]&&(n=this.xPct.length-2);!i&&e===this.xPct[n+1]&&n++,s===null&&(s=[]);var a,l=1,u=s[n],f=0,d=0,v=0,b=0;for(i?a=(e-this.xPct[n])/(this.xPct[n+1]-this.xPct[n]):a=(this.xPct[n+1]-e)/(this.xPct[n+1]-this.xPct[n]);u>0;)f=this.xPct[n+1+b]-this.xPct[n+b],s[n+b]*l+100-a*100>100?(d=f*a,l=(u-100*a)/s[n+b],a=1):(d=s[n+b]*f/100*l,l=0),i?(v=v-d,this.xPct.length+b>=1&&b--):(v=v+d,this.xPct.length-b>=1&&b++),u=s[n+b]*l;return e+v},t.prototype.toStepping=function(e){return e=rr(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return or(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=ar(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,s,i){var n=Te(e,this.xPct);return(e===100||s&&e===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/i},t.prototype.getNearbySteps=function(e){var s=Te(e,this.xPct);return{stepBefore:{startValue:this.xVal[s-2],step:this.xNumSteps[s-2],highestStep:this.xHighestCompleteStep[s-2]},thisStep:{startValue:this.xVal[s-1],step:this.xNumSteps[s-1],highestStep:this.xHighestCompleteStep[s-1]},stepAfter:{startValue:this.xVal[s],step:this.xNumSteps[s],highestStep:this.xHighestCompleteStep[s]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(Zn);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,s){var i;if(e==="min"?i=0:e==="max"?i=100:i=parseFloat(e),!J(i)||!J(s[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(i),this.xVal.push(s[0]);var n=Number(s[1]);i?this.xSteps.push(isNaN(n)?!1:n):isNaN(n)||(this.xSteps[0]=n),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,s){if(s){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=wt([this.xVal[e],this.xVal[e+1]],s,0)/At(this.xPct[e],this.xPct[e+1]);var i=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],n=Math.ceil(Number(i.toFixed(3))-1),a=this.xVal[e]+this.xNumSteps[e]*n;this.xHighestCompleteStep[e]=a}},t})(),as={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},Is={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},ie={tooltips:".__tooltips",aria:".__aria"};function lr(t,e){if(!J(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function cr(t,e){if(!J(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function ur(t,e){if(!J(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function hr(t,e){if(!J(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function fr(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new Ns(e,t.snap||!1,t.singleStep)}function dr(t,e){if(e=Fe(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function pr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function mr(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function gr(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function Vs(t,e){var s=[!1],i;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(i=1;i<t.handles;i++)s.push(e);s.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");s=e}t.connect=s}function vr(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Bs(t,e){if(!J(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function Sr(t,e){if(!J(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function br(t,e){var s;if(!J(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||J(e[0])||J(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],s=0;s<t.spectrum.xNumSteps.length-1;s++)if(t.padding[0][s]<0||t.padding[1][s]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var i=e[0]+e[1],n=t.spectrum.xVal[0],a=t.spectrum.xVal[t.spectrum.xVal.length-1];if(i/(a-n)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function wr(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function Er(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var s=e.indexOf("tap")>=0,i=e.indexOf("drag")>=0,n=e.indexOf("fixed")>=0,a=e.indexOf("snap")>=0,l=e.indexOf("hover")>=0,u=e.indexOf("unconstrained")>=0,f=e.indexOf("invert-connects")>=0,d=e.indexOf("drag-all")>=0,v=e.indexOf("smooth-steps")>=0;if(n){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Bs(t,t.start[1]-t.start[0])}if(f&&t.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(u&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:s||a,drag:i,dragAll:d,smoothSteps:v,fixed:n,snap:a,hover:l,unconstrained:u,invertConnects:f}}function yr(t,e){if(e!==!1)if(e===!0||Ie(e)){t.tooltips=[];for(var s=0;s<t.handles;s++)t.tooltips.push(e)}else{if(e=Fe(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(i){if(typeof i!="boolean"&&!Ie(i))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Cr(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function xr(t,e){if(!Ie(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function kr(t,e){if(!Jn(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function _r(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Ar(t,e){t.documentElement=e}function Tr(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Pr(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(s){t.cssClasses[s]=t.cssPrefix+e[s]})):t.cssClasses=e}function zs(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:as,format:as},s={step:{r:!1,t:lr},keyboardPageMultiplier:{r:!1,t:cr},keyboardMultiplier:{r:!1,t:ur},keyboardDefaultStep:{r:!1,t:hr},start:{r:!0,t:dr},connect:{r:!0,t:Vs},direction:{r:!0,t:wr},snap:{r:!1,t:pr},animate:{r:!1,t:mr},animationDuration:{r:!1,t:gr},range:{r:!0,t:fr},orientation:{r:!1,t:vr},margin:{r:!1,t:Bs},limit:{r:!1,t:Sr},padding:{r:!1,t:br},behaviour:{r:!0,t:Er},ariaFormat:{r:!1,t:xr},format:{r:!1,t:kr},tooltips:{r:!1,t:yr},keyboardSupport:{r:!0,t:_r},documentElement:{r:!1,t:Ar},cssPrefix:{r:!0,t:Tr},cssClasses:{r:!0,t:Pr},handleAttributes:{r:!1,t:Cr}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Is,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(s).forEach(function(f){if(!bt(t[f])&&i[f]===void 0){if(s[f].r)throw new Error("noUiSlider: '"+f+"' is required.");return}s[f].t(e,bt(t[f])?t[f]:i[f])}),e.pips=t.pips;var n=document.createElement("div"),a=n.style.msTransform!==void 0,l=n.style.transform!==void 0;e.transformRule=l?"transform":a?"msTransform":"webkitTransform";var u=[["left","top"],["right","bottom"]];return e.style=u[e.dir][e.ort],e}function Rr(t,e,s){var i=er(),n=sr(),a=n&&tr(),l=t,u,f,d,v,b,C,w=e.spectrum,_=[],E=[],U=[],G=0,z={},Y=!1,Q=t.ownerDocument,ee=e.documentElement||Q.documentElement,ce=Q.body,$=Q.dir==="rtl"||e.ort===1?0:100;function R(r,o){var c=Q.createElement("div");return o&&V(c,o),r.appendChild(c),c}function O(r,o){var c=R(r,e.cssClasses.origin),h=R(c,e.cssClasses.handle);if(R(h,e.cssClasses.touchArea),h.setAttribute("data-handle",String(o)),e.keyboardSupport&&(h.setAttribute("tabindex","0"),h.addEventListener("keydown",function(m){return si(m,o)})),e.handleAttributes!==void 0){var p=e.handleAttributes[o];Object.keys(p).forEach(function(m){h.setAttribute(m,p[m])})}return h.setAttribute("role","slider"),h.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),o===0?V(h,e.cssClasses.handleLower):o===e.handles-1&&V(h,e.cssClasses.handleUpper),c.handle=h,c}function P(r,o){return o?R(r,e.cssClasses.connect):!1}function M(r,o){f=R(o,e.cssClasses.connects),d=[],v=[],v.push(P(f,r[0]));for(var c=0;c<e.handles;c++)d.push(O(o,c)),U[c]=c,v.push(P(f,r[c+1]))}function te(r){V(r,e.cssClasses.target),e.dir===0?V(r,e.cssClasses.ltr):V(r,e.cssClasses.rtl),e.ort===0?V(r,e.cssClasses.horizontal):V(r,e.cssClasses.vertical);var o=getComputedStyle(r).direction;return o==="rtl"?V(r,e.cssClasses.textDirectionRtl):V(r,e.cssClasses.textDirectionLtr),R(r,e.cssClasses.base)}function F(r,o){return!e.tooltips||!e.tooltips[o]?!1:R(r.firstChild,e.cssClasses.tooltip)}function q(){return l.hasAttribute("disabled")}function K(r){var o=d[r];return o.hasAttribute("disabled")}function Fs(r){r!=null?(d[r].setAttribute("disabled",""),d[r].handle.removeAttribute("tabindex")):(l.setAttribute("disabled",""),d.forEach(function(o){o.handle.removeAttribute("tabindex")}))}function Ws(r){r!=null?(d[r].removeAttribute("disabled"),d[r].handle.setAttribute("tabindex","0")):(l.removeAttribute("disabled"),d.forEach(function(o){o.removeAttribute("disabled"),o.handle.setAttribute("tabindex","0")}))}function We(){C&&(Se("update"+ie.tooltips),C.forEach(function(r){r&&is(r)}),C=null)}function Tt(){We(),C=d.map(F),Xe("update"+ie.tooltips,function(r,o,c){if(!(!C||!e.tooltips)&&C[o]!==!1){var h=r[o];e.tooltips[o]!==!0&&(h=e.tooltips[o].to(c[o])),C[o].innerHTML=h}})}function Ks(){Se("update"+ie.aria),Xe("update"+ie.aria,function(r,o,c,h,p){U.forEach(function(m){var S=d[m],g=Pe(E,m,0,!0,!0,!0),x=Pe(E,m,100,!0,!0,!0),k=p[m],A=String(e.ariaFormat.to(c[m]));g=w.fromStepping(g).toFixed(1),x=w.fromStepping(x).toFixed(1),k=w.fromStepping(k).toFixed(1),S.children[0].setAttribute("aria-valuemin",g),S.children[0].setAttribute("aria-valuemax",x),S.children[0].setAttribute("aria-valuenow",k),S.children[0].setAttribute("aria-valuetext",A)})})}function Gs(r){if(r.mode===oe.Range||r.mode===oe.Steps)return w.xVal;if(r.mode===oe.Count){if(r.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var o=r.values-1,c=100/o,h=[];o--;)h[o]=o*c;return h.push(100),Pt(h,r.stepped)}return r.mode===oe.Positions?Pt(r.values,r.stepped):r.mode===oe.Values?r.stepped?r.values.map(function(p){return w.fromStepping(w.getStep(w.toStepping(p)))}):r.values:[]}function Pt(r,o){return r.map(function(c){return w.fromStepping(o?w.getStep(c):c)})}function Js(r){function o(k,A){return Number((k+A).toFixed(7))}var c=Gs(r),h={},p=w.xVal[0],m=w.xVal[w.xVal.length-1],S=!1,g=!1,x=0;return c=qn(c.slice().sort(function(k,A){return k-A})),c[0]!==p&&(c.unshift(p),S=!0),c[c.length-1]!==m&&(c.push(m),g=!0),c.forEach(function(k,A){var T,y,L,I=k,D=c[A+1],H,Qe,et,tt,Nt,st,It,Vt=r.mode===oe.Steps;for(Vt&&(T=w.xNumSteps[A]),T||(T=D-I),D===void 0&&(D=I),T=Math.max(T,1e-7),y=I;y<=D;y=o(y,T)){for(H=w.toStepping(y),Qe=H-x,Nt=Qe/(r.density||1),st=Math.round(Nt),It=Qe/st,L=1;L<=st;L+=1)et=x+L*It,h[et.toFixed(5)]=[w.fromStepping(et),0];tt=c.indexOf(y)>-1?B.LargeValue:Vt?B.SmallValue:B.NoValue,!A&&S&&y!==D&&(tt=0),y===D&&g||(h[H.toFixed(5)]=[y,tt]),x=H}}),h}function qs(r,o,c){var h,p,m=Q.createElement("div"),S=(h={},h[B.None]="",h[B.NoValue]=e.cssClasses.valueNormal,h[B.LargeValue]=e.cssClasses.valueLarge,h[B.SmallValue]=e.cssClasses.valueSub,h),g=(p={},p[B.None]="",p[B.NoValue]=e.cssClasses.markerNormal,p[B.LargeValue]=e.cssClasses.markerLarge,p[B.SmallValue]=e.cssClasses.markerSub,p),x=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],k=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];V(m,e.cssClasses.pips),V(m,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function A(y,L){var I=L===e.cssClasses.value,D=I?x:k,H=I?S:g;return L+" "+D[e.ort]+" "+H[y]}function T(y,L,I){if(I=o?o(L,I):I,I!==B.None){var D=R(m,!1);D.className=A(I,e.cssClasses.marker),D.style[e.style]=y+"%",I>B.NoValue&&(D=R(m,!1),D.className=A(I,e.cssClasses.value),D.setAttribute("data-value",String(L)),D.style[e.style]=y+"%",D.innerHTML=String(c.to(L)))}}return Object.keys(r).forEach(function(y){T(y,r[y][0],r[y][1])}),m}function Ke(){b&&(is(b),b=null)}function Ge(r){Ke();var o=Js(r),c=r.filter,h=r.format||{to:function(p){return String(Math.round(p))}};return b=l.appendChild(qs(o,c,h)),b}function Rt(){var r=u.getBoundingClientRect(),o="offset"+["Width","Height"][e.ort];return e.ort===0?r.width||u[o]:r.height||u[o]}function ue(r,o,c,h){var p=function(S){var g=Xs(S,h.pageOffset,h.target||o);if(!g||q()&&!h.doNotReject||Qn(l,e.cssClasses.tap)&&!h.doNotReject||r===i.start&&g.buttons!==void 0&&g.buttons>1||h.hover&&g.buttons)return!1;a||g.preventDefault(),g.calcPoint=g.points[e.ort],c(g,h)},m=[];return r.split(" ").forEach(function(S){o.addEventListener(S,p,a?{passive:!0}:!1),m.push([S,p])}),m}function Xs(r,o,c){var h=r.type.indexOf("touch")===0,p=r.type.indexOf("mouse")===0,m=r.type.indexOf("pointer")===0,S=0,g=0;if(r.type.indexOf("MSPointer")===0&&(m=!0),r.type==="mousedown"&&!r.buttons&&!r.touches)return!1;if(h){var x=function(T){var y=T.target;return y===c||c.contains(y)||r.composed&&r.composedPath().shift()===c};if(r.type==="touchstart"){var k=Array.prototype.filter.call(r.touches,x);if(k.length>1)return!1;S=k[0].pageX,g=k[0].pageY}else{var A=Array.prototype.find.call(r.changedTouches,x);if(!A)return!1;S=A.pageX,g=A.pageY}}return o=o||Hs(Q),(p||m)&&(S=r.clientX+o.x,g=r.clientY+o.y),r.pageOffset=o,r.points=[S,g],r.cursor=p||m,r}function jt(r){var o=r-Yn(u,e.ort),c=o*100/Rt();return c=os(c),e.dir?100-c:c}function Ys(r){var o=100,c=!1;return d.forEach(function(h,p){if(!K(p)){var m=E[p],S=Math.abs(m-r),g=S===100&&o===100,x=S<o,k=S<=o&&r>m;(x||k||g)&&(c=p,o=S)}}),c}function Zs(r,o){r.type==="mouseout"&&r.target.nodeName==="HTML"&&r.relatedTarget===null&&Je(r,o)}function Qs(r,o){if(navigator.appVersion.indexOf("MSIE 9")===-1&&r.buttons===0&&o.buttonsProperty!==0)return Je(r,o);var c=(e.dir?-1:1)*(r.calcPoint-o.startCalcPoint),h=c*100/o.baseSize;Lt(c>0,h,o.locations,o.handleNumbers,o.connect)}function Je(r,o){o.handle&&(De(o.handle,e.cssClasses.active),G-=1),o.listeners.forEach(function(c){ee.removeEventListener(c[0],c[1])}),G===0&&(De(l,e.cssClasses.drag),Ze(),r.cursor&&(ce.style.cursor="",ce.removeEventListener("selectstart",ns))),e.events.smoothSteps&&(o.handleNumbers.forEach(function(c){he(c,E[c],!0,!0,!1,!1)}),o.handleNumbers.forEach(function(c){j("update",c)})),o.handleNumbers.forEach(function(c){j("change",c),j("set",c),j("end",c)})}function qe(r,o){if(!o.handleNumbers.some(K)){var c;if(o.handleNumbers.length===1){var h=d[o.handleNumbers[0]];c=h.children[0],G+=1,V(c,e.cssClasses.active)}r.stopPropagation();var p=[],m=ue(i.move,ee,Qs,{target:r.target,handle:c,connect:o.connect,listeners:p,startCalcPoint:r.calcPoint,baseSize:Rt(),pageOffset:r.pageOffset,handleNumbers:o.handleNumbers,buttonsProperty:r.buttons,locations:E.slice()}),S=ue(i.end,ee,Je,{target:r.target,handle:c,listeners:p,doNotReject:!0,handleNumbers:o.handleNumbers}),g=ue("mouseout",ee,Zs,{target:r.target,handle:c,listeners:p,doNotReject:!0,handleNumbers:o.handleNumbers});p.push.apply(p,m.concat(S,g)),r.cursor&&(ce.style.cursor=getComputedStyle(r.target).cursor,d.length>1&&V(l,e.cssClasses.drag),ce.addEventListener("selectstart",ns,!1)),o.handleNumbers.forEach(function(x){j("start",x)})}}function ei(r){r.stopPropagation();var o=jt(r.calcPoint),c=Ys(o);c!==!1&&(e.events.snap||rs(l,e.cssClasses.tap,e.animationDuration),he(c,o,!0,!0),Ze(),j("slide",c,!0),j("update",c,!0),e.events.snap?qe(r,{handleNumbers:[c]}):(j("change",c,!0),j("set",c,!0)))}function ti(r){var o=jt(r.calcPoint),c=w.getStep(o),h=w.fromStepping(c);Object.keys(z).forEach(function(p){p.split(".")[0]==="hover"&&z[p].forEach(function(m){m.call(je,h)})})}function si(r,o){if(q()||K(o))return!1;var c=["Left","Right"],h=["Down","Up"],p=["PageDown","PageUp"],m=["Home","End"];e.dir&&!e.ort?c.reverse():e.ort&&!e.dir&&(h.reverse(),p.reverse());var S=r.key.replace("Arrow",""),g=S===p[0],x=S===p[1],k=S===h[0]||S===c[0]||g,A=S===h[1]||S===c[1]||x,T=S===m[0],y=S===m[1];if(!k&&!A&&!T&&!y)return!0;r.preventDefault();var L;if(A||k){var I=k?0:1,D=Ut(o),H=D[I];if(H===null)return!1;H===!1&&(H=w.getDefaultStep(E[o],k,e.keyboardDefaultStep)),x||g?H*=e.keyboardPageMultiplier:H*=e.keyboardMultiplier,H=Math.max(H,1e-7),H=(k?-1:1)*H,L=_[o]+H}else y?L=e.spectrum.xVal[e.spectrum.xVal.length-1]:L=e.spectrum.xVal[0];return he(o,w.toStepping(L),!0,!0),j("slide",o),j("update",o),j("change",o),j("set",o),!1}function Ot(r){r.fixed||d.forEach(function(o,c){ue(i.start,o.children[0],qe,{handleNumbers:[c]})}),r.tap&&ue(i.start,u,ei,{}),r.hover&&ue(i.move,u,ti,{hover:!0}),r.drag&&v.forEach(function(o,c){if(!(o===!1||c===0||c===v.length-1)){var h=d[c-1],p=d[c],m=[o],S=[h,p],g=[c-1,c];V(o,e.cssClasses.draggable),r.fixed&&(m.push(h.children[0]),m.push(p.children[0])),r.dragAll&&(S=d,g=U),m.forEach(function(x){ue(i.start,x,qe,{handles:S,handleNumbers:g,connect:o})})}})}function Xe(r,o){z[r]=z[r]||[],z[r].push(o),r.split(".")[0]==="update"&&d.forEach(function(c,h){j("update",h)})}function ii(r){return r===ie.aria||r===ie.tooltips}function Se(r){var o=r&&r.split(".")[0],c=o?r.substring(o.length):r;Object.keys(z).forEach(function(h){var p=h.split(".")[0],m=h.substring(p.length);(!o||o===p)&&(!c||c===m)&&(!ii(m)||c===m)&&delete z[h]})}function j(r,o,c){Object.keys(z).forEach(function(h){var p=h.split(".")[0];r===p&&z[h].forEach(function(m){m.call(je,_.map(e.format.to),o,_.slice(),c||!1,E.slice(),je)})})}function Pe(r,o,c,h,p,m,S){var g;return d.length>1&&!e.events.unconstrained&&(h&&o>0&&(g=w.getAbsoluteDistance(r[o-1],e.margin,!1),c=Math.max(c,g)),p&&o<d.length-1&&(g=w.getAbsoluteDistance(r[o+1],e.margin,!0),c=Math.min(c,g))),d.length>1&&e.limit&&(h&&o>0&&(g=w.getAbsoluteDistance(r[o-1],e.limit,!1),c=Math.min(c,g)),p&&o<d.length-1&&(g=w.getAbsoluteDistance(r[o+1],e.limit,!0),c=Math.max(c,g))),e.padding&&(o===0&&(g=w.getAbsoluteDistance(0,e.padding[0],!1),c=Math.max(c,g)),o===d.length-1&&(g=w.getAbsoluteDistance(100,e.padding[1],!0),c=Math.min(c,g))),S||(c=w.getStep(c)),c=os(c),c===r[o]&&!m?!1:c}function Ye(r,o){var c=e.ort;return(c?o:r)+", "+(c?r:o)}function Lt(r,o,c,h,p){var m=c.slice(),S=h[0],g=e.events.smoothSteps,x=[!r,r],k=[r,!r];h=h.slice(),r&&h.reverse(),h.length>1?h.forEach(function(T,y){var L=Pe(m,T,m[T]+o,x[y],k[y],!1,g);L===!1?o=0:(o=L-m[T],m[T]=L)}):x=k=[!0];var A=!1;h.forEach(function(T,y){A=he(T,c[T]+o,x[y],k[y],!1,g)||A}),A&&(h.forEach(function(T){j("update",T),j("slide",T)}),p!=null&&j("drag",S))}function $t(r,o){return e.dir?100-r-o:r}function ni(r,o){E[r]=o,_[r]=w.fromStepping(o);var c=$t(o,0)-$,h="translate("+Ye(c+"%","0")+")";if(d[r].style[e.transformRule]=h,e.events.invertConnects&&E.length>1){var p=E.every(function(m,S,g){return S===0||m>=g[S-1]});if(Y!==!p){ui();return}}be(r),be(r+1),Y&&(be(r-1),be(r+2))}function Ze(){U.forEach(function(r){var o=E[r]>50?-1:1,c=3+(d.length+o*r);d[r].style.zIndex=String(c)})}function he(r,o,c,h,p,m){return p||(o=Pe(E,r,o,c,h,!1,m)),o===!1?!1:(ni(r,o),!0)}function be(r){if(v[r]){var o=E.slice();Y&&o.sort(function(g,x){return g-x});var c=0,h=100;r!==0&&(c=o[r-1]),r!==v.length-1&&(h=o[r]);var p=h-c,m="translate("+Ye($t(c,p)+"%","0")+")",S="scale("+Ye(p/100,"1")+")";v[r].style[e.transformRule]=m+" "+S}}function Mt(r,o){return r===null||r===!1||r===void 0||(typeof r=="number"&&(r=String(r)),r=e.format.from(r),r!==!1&&(r=w.toStepping(r)),r===!1||isNaN(r))?E[o]:r}function Re(r,o,c){var h=Fe(r),p=E[0]===void 0;o=o===void 0?!0:o,e.animate&&!p&&rs(l,e.cssClasses.tap,e.animationDuration),U.forEach(function(g){he(g,Mt(h[g],g),!0,!1,c)});var m=U.length===1?0:1;if(p&&w.hasNoSize()&&(c=!0,E[0]=0,U.length>1)){var S=100/(U.length-1);U.forEach(function(g){E[g]=g*S})}for(;m<U.length;++m)U.forEach(function(g){he(g,E[g],!0,!0,c)});Ze(),U.forEach(function(g){j("update",g),h[g]!==null&&o&&j("set",g)})}function ri(r){Re(e.start,r)}function oi(r,o,c,h){if(r=Number(r),!(r>=0&&r<U.length))throw new Error("noUiSlider: invalid handle number, got: "+r);he(r,Mt(o,r),!0,!0,h),j("update",r),c&&j("set",r)}function Dt(r){if(r===void 0&&(r=!1),r)return _.length===1?_[0]:_.slice(0);var o=_.map(e.format.to);return o.length===1?o[0]:o}function ai(){for(Se(ie.aria),Se(ie.tooltips),Object.keys(e.cssClasses).forEach(function(r){De(l,e.cssClasses[r])});l.firstChild;)l.removeChild(l.firstChild);delete l.noUiSlider}function Ut(r){var o=E[r],c=w.getNearbySteps(o),h=_[r],p=c.thisStep.step,m=null;if(e.snap)return[h-c.stepBefore.startValue||null,c.stepAfter.startValue-h||null];p!==!1&&h+p>c.stepAfter.startValue&&(p=c.stepAfter.startValue-h),h>c.thisStep.startValue?m=c.thisStep.step:c.stepBefore.step===!1?m=!1:m=h-c.stepBefore.highestStep,o===100?p=null:o===0&&(m=null);var S=w.countStepDecimals();return p!==null&&p!==!1&&(p=Number(p.toFixed(S))),m!==null&&m!==!1&&(m=Number(m.toFixed(S))),[m,p]}function li(){return U.map(Ut)}function ci(r,o){var c=Dt(),h=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];h.forEach(function(m){r[m]!==void 0&&(s[m]=r[m])});var p=zs(s);h.forEach(function(m){r[m]!==void 0&&(e[m]=p[m])}),w=p.spectrum,e.margin=p.margin,e.limit=p.limit,e.padding=p.padding,e.pips?Ge(e.pips):Ke(),e.tooltips?Tt():We(),E=[],Re(bt(r.start)?r.start:c,o),r.connect&&Ht()}function Ht(){for(;f.firstChild;)f.removeChild(f.firstChild);for(var r=0;r<=e.handles;r++)v[r]=P(f,e.connect[r]),be(r);Ot({drag:e.events.drag,fixed:!0})}function ui(){Y=!Y,Vs(e,e.connect.map(function(r){return!r})),Ht()}function hi(){u=te(l),M(e.connect,u),Ot(e.events),Re(e.start),e.pips&&Ge(e.pips),e.tooltips&&Tt(),Ks()}hi();var je={destroy:ai,steps:li,on:Xe,off:Se,get:Dt,set:Re,setHandle:oi,reset:ri,disable:Fs,enable:Ws,__moveHandles:function(r,o,c){Lt(r,o,E,c)},options:s,updateOptions:ci,target:l,removePips:Ke,removeTooltips:We,getPositions:function(){return E.slice()},getTooltips:function(){return C},getOrigins:function(){return d},pips:Ge};return je}function jr(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var s=zs(e),i=Rr(t,s,e);return t.noUiSlider=i,i}const Or={__spectrum:Ns,cssClasses:Is,create:jr},Et=On*1e3,Lr=()=>new Promise((t,e)=>{if(document.getElementById("hls-script")!==null){t();return}const i=document.createElement("script");i.type="text/javascript",i.id="hls-script",i.src="/js/hls.light.min.js",i.onload=t,i.onerror=e,document.body.appendChild(i)}),$r=()=>new Promise((t,e)=>{if(document.getElementById("dash-script")!==null){t(!0);return}const i=document.createElement("script");i.type="text/javascript",i.id="dash-script",i.src="/js/dash.all.min.js",i.onload=t,i.onerror=e,document.body.appendChild(i)}),ls=(t,e,s,i)=>{if(e==null)return;const n=new Date;if(n.getTime()-e.getTime()<Et)return;let a=`https://${apiUrl}/listening_session/`;s!==null&&(a+=s);const l={date_time_start:e.toISOString(),date_time_end:n.toISOString(),source:Ln,ctrl:Math.random()};return i===!0&&(l.ending=!0),t.includes("-")?l.stream_id=t:l.radio_stream_code_name=`${t}_main`,fetch(a,{method:s!==null?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(u=>u.json()).then(u=>typeof u.id<"u"?u:null)},Mr=(t,e)=>{if(!t||!t.includes("-"))return;const s=`https://${apiUrl}/stream_error/${t}`,i={};return e&&(i.error=e),fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(n=>n.json())},cs=t=>{const e=document.getElementById("playing-alert");e&&(t===!0?e.classList.remove("d-none"):e.classList.add("d-none"))},Ee=t=>{if(t){window.audio&&(window.audio.volume=t/10);return}typeof appVolume<"u"&&window.audio&&(window.audio.volume=appVolume),window.audio&&(window.audio.volume=vt.get(gt,10)/10)},ye=t=>{const e=document.getElementsByClassName("stream-title");if(!e||!e[0]||!e[0].dataset.title)return;let s="";t&&(s+=` ${t} - `),document.title=`${s}${e[0].dataset.title}`},Dr=t=>{appEnv==="dev"&&t.includes("-")&&fetch(`https://${apiUrl}/config`,{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e&&e.radio_browser_url&&fetch(`${e.radio_browser_url}/json/url/${t}`,{headers:{"User-Agent":isProgRadio?Dn:Un}})}).catch(e=>{})};$s({hls:null,dash:null,socket:null,socketTimer:null,channels:{},playing:Oe,song:null,cover:null,listeners:null,visibilityListeners:{},lastUpdated:null,radioId:null,playingStart:null,sessionId:null,listeningInterval:null,options:{webSocket:typeof appWebSocket<"u"?appWebSocket:!0,sendStatistics:typeof appSendStatistics<"u"?appSendStatistics:!0},init(){const t=document.getElementById("volume-slider");if(t){const e=vt.get(gt,10);Ee(e),Or.create(t,{start:e,connect:"lower",range:{min:0,max:10}}),t.noUiSlider.on("update.one",s=>{const i=parseFloat(s[0]).toFixed(2);vt.set(gt,i),Ee(i)})}},play(t,e,s){if(s||(s={}),cs(!1),this.playing!==Oe&&this.stop(),this.listeningInterval!==null&&(clearInterval(this.listeningInterval),this.listeningInterval=null),this.options.sendStatistics&&sendGaEvent("play","SSR",e,3),s.popup&&s.popup===!0){window.open(popupUrl.replace(_n,e),"",kn);return}this.playing=Mn,this.radioId=e,this.sessionId=null,this.playerStart=new Date,t.indexOf(".m3u8")!==-1||s.force_hls&&s.force_hls===!0?Lr().then(()=>{Hls.isSupported()&&(window.audio=document.getElementById("videoplayer"),this.hls=new Hls,this.hls.attachMedia(window.audio),this.hls.on(Hls.Events.ERROR,(i,n)=>{n.fatal&&this.playingError(e,n.details)}),this.hls.on(Hls.Events.MEDIA_ATTACHED,()=>{this.hls.loadSource(t),this.hls.on(Hls.Events.MANIFEST_PARSED,()=>{Ee(),window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)})})}))}):t.indexOf(".mpd")!==-1||s.force_mpd&&s.force_mpd===!0?$r().then(()=>{window.audio=document.getElementById("videoplayer"),this.dash=dashjs.MediaPlayer().create(),this.dash.initialize(window.audio,t,!1),this.dash.on("error",()=>{this.playingError(e)}),this.dash.on("canPlay",()=>{Ee(),window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)})})}):(window.audio=document.getElementById("videoplayer"),window.audio.src=t.trim(),Ee(),window.audio.onerror=i=>{if(t.trim().substring(0,5)!=="https"){this.stop(),this.play(`${streamsProxy}?k=${streamsProxyKey}&stream=${t}`,e,s.topic,s.streamCodeName);return}this.playingError(e,i.target.error.message||null)},window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)}))},stop(){window.audio!==void 0&&window.audio!==null&&window.audio.pause(),this.listeningInterval!==null&&(clearInterval(this.listeningInterval),this.listeningInterval=null),this.hls!==null&&(this.hls.destroy(),this.hls=null),this.dash!==null&&(this.dash.destroy(),this.dash=null),window.audio=null,delete window.audio,this.playing!==!1&&this.options.sendStatistics&&(ls(this.radioId,this.playingStart,this.sessionId,!0),sendGaEvent("stop","SSR",this.radioId,1)),this.playing=Oe,this.radioId=null,this.listeningInterval=null,this.sessionId=null,this.playingStart=null},playingStarted(t,e){this.playing=$n,this.lastUpdated=new Date,this.playingStart=new Date,this.options.sendStatistics&&(this.listeningInterval=setInterval(()=>{ls(this.radioId,this.playingStart,this.sessionId).then(s=>{s.id!==null&&(this.sessionId=s.id,this.playingStart=new Date(s.date_time_start))})},Et),setTimeout(()=>{Dr(this.radioId)},Et+500)),window.audio.addEventListener("timeupdate",()=>{this.lastUpdated=new Date}),t&&t.trim()!==""&&this.joinChannel(t.trim()),e&&e.trim()!==""&&this.joinChannel(`listeners:${e.trim()}`)},playingError(t,e){setTimeout(()=>{this.playing=Oe,cs(!0),this.options.sendStatistics&&Mr(t,e)},2500)},connectSocket(){if(this.options.webSocket){if(!this.socket){const t={heartbeatIntervalMs:jn,reconnectAfterMs:e=>e>=Rn?null:[1e3,5e3,1e4,15e3,2e4,25e3,5e4,1e5,2e5,5e5,1e6,2e6][e-1]||3e4};this.socket=new Gn(`wss://${apiUrl}/socket`,t),this.socket.onOpen(()=>{this.setSocketTimer()}),this.socket.onClose(()=>{this.song=null,this.cover=null,this.listeners=null,this.clearSocketTimer(),ye(null)})}this.socket&&!this.socket.isConnected()&&this.socket.connect()}},setSocketTimer(){this.clearSocketTimer(),this.socketTimer=setTimeout(()=>{this.socket&&(this.socket.disconnect(),this.socketTimer=null)},Pn)},clearSocketTimer(){this.socketTimer&&(clearTimeout(this.socketTimer),this.socketTimer=null)},joinChannel(t){this.options.webSocket&&(t.trim().startsWith("listeners:")&&!this.visibilityListeners[t]&&(this.visibilityListeners[t]=!0,document.addEventListener("visibilitychange",()=>{this.channels[t]&&document.hidden?(this.channels[t].leave(),delete this.channels[t],this.listeners=null):this.joinChannel(t)})),this.connectSocket(),!Object.prototype.hasOwnProperty.call(this.channels,t)&&(this.channels[t]=this.socket.channel(t,{}),this.channels[t].join().receive("error",e=>{t.startsWith("listeners:")?this.listeners=null:(this.song=null,this.cover=null,ye(null))}).receive("timeout",()=>{t.startsWith("listeners:")?this.listeners=null:(this.song=null,this.cover=null,ye(null))}),this.channels[t].on("playing",e=>{this.formatSong(e),ye(this.song)}),this.channels[t].on("counter_update",e=>{this.formatListeners(e)}),this.channels[t].on("quit",()=>{this.song=null,this.cover=null,this.listeners=null,this.channels[t]=null,delete this.channels[t],ye(null)})))},formatSong(t){if(!t||!t.song){this.song=null,this.cover=null;return}let e="",s=!1;t.song.artist!==void 0&&t.song.artist!==null&&t.song.artist!==""&&(e+=t.song.artist,s=!0),t.song.title!==void 0&&t.song.title!==null&&t.song.title!==""&&(s===!0&&(e+=" - "),e+=t.song.title),this.song=e===""?null:e,this.cover=t.song.cover_url?t.song.cover_url:null},formatListeners(t){if(!t||!t.listeners||!t.listeners===0){this.listeners=null;return}this.listeners=t.listeners}}).mount();
{% endverbatim %}
</script>
