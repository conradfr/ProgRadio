<audio id="videoplayer" style="display:none"></audio>
<script type="text/javascript">
  const PLAYER_STATE_STOPPED = 1;
  const PLAYER_STATE_PLAYING = 3;
  const PLAYER_STATE_LOADING = 42;
</script>
<script type="module">
{% verbatim %}
(()=>{"use strict";var e=Object.defineProperty,t=(t,s,n)=>(((t,s,n)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n})(t,"symbol"!=typeof s?s+"":s,n),n);function s(e){if(d(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=g(i)?o(i):s(i);if(r)for(const e in r)t[e]=r[e]}return t}return g(e)||y(e)?e:void 0}const n=/;(?![^(]*\))/g,i=/:(.+)/;function o(e){const t={};return e.split(n).forEach((e=>{if(e){const s=e.split(i);s.length>1&&(t[s[0].trim()]=s[1].trim())}})),t}function r(e){let t="";if(g(e))t=e;else if(d(e))for(let s=0;s<e.length;s++){const n=r(e[s]);n&&(t+=n+" ")}else if(y(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}function l(e,t){if(e===t)return!0;let s=p(e),n=p(t);if(s||n)return!(!s||!n)&&e.getTime()===t.getTime();if(s=d(e),n=d(t),s||n)return!(!s||!n)&&function(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=l(e[n],t[n]);return s}(e,t);if(s=y(e),n=y(t),s||n){if(!s||!n)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e){const n=e.hasOwnProperty(s),i=t.hasOwnProperty(s);if(n&&!i||!n&&i||!l(e[s],t[s]))return!1}}return String(e)===String(t)}function a(e,t){return e.findIndex((e=>l(e,t)))}const h=Object.assign,c=Object.prototype.hasOwnProperty,u=(e,t)=>c.call(e,t),d=Array.isArray,f=e=>"[object Map]"===b(e),p=e=>e instanceof Date,g=e=>"string"==typeof e,m=e=>"symbol"==typeof e,y=e=>null!==e&&"object"==typeof e,v=Object.prototype.toString,b=e=>v.call(e),w=e=>b(e).slice(8,-1),k=e=>g(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,E=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},C=/-(\w)/g,T=E((e=>e.replace(C,((e,t)=>t?t.toUpperCase():"")))),S=/\B([A-Z])/g,j=E((e=>e.replace(S,"-$1").toLowerCase())),R=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _;function $(e,t){(t=t||_)&&t.active&&t.effects.push(e)}const x=e=>{const t=new Set(e);return t.w=0,t.n=0,t},A=e=>(e.w&L)>0,O=e=>(e.n&L)>0,P=new WeakMap;let I=0,L=1;const M=30,H=[];let N;const U=Symbol(""),D=Symbol("");class B{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],$(this,s)}run(){if(!this.active)return this.fn();if(!H.includes(this))try{return H.push(N=this),F.push(J),J=!0,L=1<<++I,I<=M?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=L})(this):W(this),this.fn()}finally{I<=M&&(e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n];A(i)&&!O(i)?i.delete(e):t[s++]=i,i.w&=~L,i.n&=~L}t.length=s}})(this),L=1<<--I,G(),H.pop();const e=H.length;N=e>0?H[e-1]:void 0}}stop(){this.active&&(W(this),this.onStop&&this.onStop(),this.active=!1)}}function W(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}function q(e){e.effect.stop()}let J=!0;const F=[];function G(){const e=F.pop();J=void 0===e||e}function K(e,t,s){if(!J||void 0===N)return;let n=P.get(e);n||P.set(e,n=new Map);let i=n.get(s);i||n.set(s,i=x()),function(e,t){let s=!1;I<=M?O(e)||(e.n|=L,s=!A(e)):s=!e.has(N),s&&(e.add(N),N.deps.push(e))}(i)}function z(e,t,s,n,i,o){const r=P.get(e);if(!r)return;let l=[];if("clear"===t)l=[...r.values()];else if("length"===s&&d(e))r.forEach(((e,t)=>{("length"===t||t>=n)&&l.push(e)}));else switch(void 0!==s&&l.push(r.get(s)),t){case"add":d(e)?k(s)&&l.push(r.get("length")):(l.push(r.get(U)),f(e)&&l.push(r.get(D)));break;case"delete":d(e)||(l.push(r.get(U)),f(e)&&l.push(r.get(D)));break;case"set":f(e)&&l.push(r.get(U))}if(1===l.length)l[0]&&V(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);V(x(e))}}function V(e,t){for(const t of d(e)?e:[...e])(t!==N||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Z=function(e,t){const s=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)s[n[e]]=!0;return t?e=>!!s[e.toLowerCase()]:e=>!!s[e]}("__proto__,__v_isRef,__isVue"),X=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(m)),Q=te(),Y=te(!0),ee=function(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const s=ce(this);for(let e=0,t=this.length;e<t;e++)K(s,0,e+"");const n=s[t](...e);return-1===n||!1===n?s[t](...e.map(ce)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){F.push(J),J=!1;const s=ce(this)[t].apply(this,e);return G(),s}})),e}();function te(e=!1,t=!1){return function(s,n,i){if("__v_isReactive"===n)return!e;if("__v_isReadonly"===n)return e;if("__v_raw"===n&&i===(e?t?le:re:t?oe:ie).get(s))return s;const o=d(s);if(!e&&o&&u(ee,n))return Reflect.get(ee,n,i);const r=Reflect.get(s,n,i);return(m(n)?X.has(n):Z(n))||(e||K(s,0,n),t)?r:ue(r)?o&&k(n)?r:r.value:y(r)?e?function(e){return he(e,!0,ne,null,re)}(r):ae(r):r}}const se={get:Q,set:function(e=!1){return function(t,s,n,i){let o=t[s];if(!e&&!function(e){return!(!e||!e.__v_isReadonly)}(n)&&(n=ce(n),o=ce(o),!d(t)&&ue(o)&&!ue(n)))return o.value=n,!0;const r=d(t)&&k(s)?Number(s)<t.length:u(t,s),l=Reflect.set(t,s,n,i);return t===ce(i)&&(r?((e,t)=>!Object.is(e,t))(n,o)&&z(t,"set",s,n):z(t,"add",s,n)),l}}(),deleteProperty:function(e,t){const s=u(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&z(e,"delete",t,void 0),n},has:function(e,t){const s=Reflect.has(e,t);return(!m(t)||!X.has(t))&&K(e,0,t),s},ownKeys:function(e){return K(e,0,d(e)?"length":U),Reflect.ownKeys(e)}},ne={get:Y,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},ie=new WeakMap,oe=new WeakMap,re=new WeakMap,le=new WeakMap;function ae(e){return e&&e.__v_isReadonly?e:he(e,!1,se,null,ie)}function he(e,t,s,n,i){if(!y(e)||e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const r=function(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(w(e))}(e);if(0===r)return e;const l=new Proxy(e,2===r?n:s);return i.set(e,l),l}function ce(e){const t=e&&e.__v_raw;return t?ce(t):e}function ue(e){return Boolean(e&&!0===e.__v_isRef)}Promise.resolve();let de=!1;const fe=[],pe=Promise.resolve(),ge=e=>pe.then(e),me=e=>{fe.includes(e)||fe.push(e),de||(de=!0,ge(ye))},ye=()=>{for(const e of fe)e();fe.length=0,de=!1},ve=/^(spellcheck|draggable|form|list|type)$/,be=({el:e,get:t,effect:s,arg:n,modifiers:i})=>{let o;"class"===n&&(e._class=e.className),s((()=>{let s=t();if(n)(null==i?void 0:i.camel)&&(n=T(n)),we(e,n,s,o);else{for(const t in s)we(e,t,s[t],o&&o[t]);for(const t in o)(!s||!(t in s))&&we(e,t,null)}o=s}))},we=(e,t,n,i)=>{if("class"===t)e.setAttribute("class",r(e._class?[e._class,n]:n)||"");else if("style"===t){n=s(n);const{style:t}=e;if(n)if(g(n))n!==i&&(t.cssText=n);else{for(const e in n)Ee(t,e,n[e]);if(i&&!g(i))for(const e in i)null==n[e]&&Ee(t,e,"")}else e.removeAttribute("style")}else e instanceof SVGElement||!(t in e)||ve.test(t)?"true-value"===t?e._trueValue=n:"false-value"===t?e._falseValue=n:null!=n?e.setAttribute(t,n):e.removeAttribute(t):(e[t]=n,"value"===t&&(e._value=n))},ke=/\s*!important$/,Ee=(e,t,s)=>{d(s)?s.forEach((s=>Ee(e,t,s))):t.startsWith("--")?e.setProperty(t,s):ke.test(s)?e.setProperty(j(t),s.replace(ke,""),"important"):e[t]=s},Ce=(e,t)=>{const s=e.getAttribute(t);return null!=s&&e.removeAttribute(t),s},Te=(e,t,s,n)=>{e.addEventListener(t,s,n)},Se=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,je=["ctrl","shift","alt","meta"],Re={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>je.some((s=>e[`${s}Key`]&&!t[s]))},_e=({el:e,get:t,exp:s,arg:n,modifiers:i})=>{if(!n)return;let o=Se.test(s)?t(`(e => ${s}(e))`):t(`($event => { ${s} })`);if("vue:mounted"!==n){if("vue:unmounted"===n)return()=>o();if(i){"click"===n&&(i.right&&(n="contextmenu"),i.middle&&(n="mouseup"));const e=o;o=t=>{if(!("key"in t)||j(t.key)in i){for(const e in i){const s=Re[e];if(s&&s(t,i))return}return e(t)}}}Te(e,n,o,i)}else ge(o)},$e=({el:e,get:t,effect:s})=>{s((()=>{e.textContent=xe(t())}))},xe=e=>null==e?"":y(e)?JSON.stringify(e,null,2):String(e),Ae=e=>"_value"in e?e._value:e.value,Oe=(e,t)=>{const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t},Pe=e=>{e.target.composing=!0},Ie=e=>{const t=e.target;t.composing&&(t.composing=!1,Le(t,"input"))},Le=(e,t)=>{const s=document.createEvent("HTMLEvents");s.initEvent(t,!0,!0),e.dispatchEvent(s)},Me=Object.create(null),He=(e,t,s)=>Ne(e,`return(${t})`,s),Ne=(e,t,s)=>{const n=Me[t]||(Me[t]=Ue(t));try{return n(e,s)}catch(e){console.error(e)}},Ue=e=>{try{return new Function("$data","$el",`with($data){${e}}`)}catch(t){return console.error(`${t.message} in expression: ${e}`),()=>{}}},De={bind:be,on:_e,show:({el:e,get:t,effect:s})=>{const n=e.style.display;s((()=>{e.style.display=t()?n:"none"}))},text:$e,html:({el:e,get:t,effect:s})=>{s((()=>{e.innerHTML=t()}))},model:({el:e,exp:t,get:s,effect:n,modifiers:i})=>{const o=e.type,r=s(`(val) => { ${t} = val }`),{trim:h,number:c="number"===o}=i||{};if("SELECT"===e.tagName){const t=e;Te(e,"change",(()=>{const e=Array.prototype.filter.call(t.options,(e=>e.selected)).map((e=>c?R(Ae(e)):Ae(e)));r(t.multiple?e:e[0])})),n((()=>{const e=s(),n=t.multiple;for(let s=0,i=t.options.length;s<i;s++){const i=t.options[s],o=Ae(i);if(n)d(e)?i.selected=a(e,o)>-1:i.selected=e.has(o);else if(l(Ae(i),e))return void(t.selectedIndex!==s&&(t.selectedIndex=s))}!n&&-1!==t.selectedIndex&&(t.selectedIndex=-1)}))}else if("checkbox"===o){let t;Te(e,"change",(()=>{const t=s(),n=e.checked;if(d(t)){const s=Ae(e),i=a(t,s),o=-1!==i;if(n&&!o)r(t.concat(s));else if(!n&&o){const e=[...t];e.splice(i,1),r(e)}}else r(Oe(e,n))})),n((()=>{const n=s();d(n)?e.checked=a(n,Ae(e))>-1:n!==t&&(e.checked=l(n,Oe(e,!0))),t=n}))}else if("radio"===o){let t;Te(e,"change",(()=>{r(Ae(e))})),n((()=>{const n=s();n!==t&&(e.checked=l(n,Ae(e)))}))}else{const t=e=>h?e.trim():c?R(e):e;Te(e,"compositionstart",Pe),Te(e,"compositionend",Ie),Te(e,(null==i?void 0:i.lazy)?"change":"input",(()=>{e.composing||r(t(e.value))})),h&&Te(e,"change",(()=>{e.value=e.value.trim()})),n((()=>{if(e.composing)return;const n=e.value,i=s();document.activeElement===e&&t(n)===i||n!==i&&(e.value=i)}))}},effect:({el:e,ctx:t,exp:s,effect:n})=>{ge((()=>n((()=>Ne(t.scope,s,e)))))}},Be=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,We=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,qe=/^\(|\)$/g,Je=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,Fe=(e,t,s)=>{const n=t.match(Be);if(!n)return;const i=e.nextSibling,o=e.parentElement,r=new Text("");o.insertBefore(r,e),o.removeChild(e);const l=n[2].trim();let a,h,c,u,f=n[1].trim().replace(qe,"").trim(),p=!1,g="key",m=e.getAttribute(g)||e.getAttribute(g=":key")||e.getAttribute(g="v-bind:key");m&&(e.removeAttribute(g),"key"===g&&(m=JSON.stringify(m))),(u=f.match(We))&&(f=f.replace(We,"").trim(),h=u[1].trim(),u[2]&&(c=u[2].trim())),(u=f.match(Je))&&(a=u[1].split(",").map((e=>e.trim())),p="["===f[0]);let v,b,w,k=!1;const E=(e,t,n,i)=>{const o={};a?a.forEach(((e,s)=>o[e]=t[p?s:e])):o[f]=t,i?(h&&(o[h]=i),c&&(o[c]=n)):h&&(o[h]=n);const r=st(s,o),l=m?He(r.scope,m):n;return e.set(l,n),r.key=l,r},C=(t,s)=>{const n=new it(e,t);return n.key=t.key,n.insert(o,s),n};return s.effect((()=>{const e=He(s.scope,l),t=w;if([b,w]=(e=>{const t=new Map,s=[];if(d(e))for(let n=0;n<e.length;n++)s.push(E(t,e[n],n));else if("number"==typeof e)for(let n=0;n<e;n++)s.push(E(t,n+1,n));else if(y(e)){let n=0;for(const i in e)s.push(E(t,e[i],n++,i))}return[s,t]})(e),k){for(let e=0;e<v.length;e++)w.has(v[e].key)||v[e].remove();const e=[];let s,n,i=b.length;for(;i--;){const l=b[i],a=t.get(l.key);let h;null==a?h=C(l,s?s.el:r):(h=v[a],Object.assign(h.ctx.scope,l.scope),a!==i&&(v[a+1]!==s||n===s)&&(n=h,h.insert(o,s?s.el:r))),e.unshift(s=h)}v=e}else v=b.map((e=>C(e,r))),k=!0})),i},Ge=({el:e,ctx:{scope:{$refs:t}},get:s,effect:n})=>{let i;return n((()=>{const n=s();t[n]=e,i&&n!==i&&delete t[i],i=n})),()=>{i&&delete t[i]}},Ke=/^(?:v-|:|@)/,ze=/\.([\w-]+)/g;let Ve=!1;const Ze=(e,t)=>{const s=e.nodeType;if(1===s){const s=e;if(s.hasAttribute("v-pre"))return;let n;if(Ce(s,"v-cloak"),n=Ce(s,"v-if"))return((e,t,s)=>{const n=e.parentElement,i=new Comment("v-if");n.insertBefore(i,e);const o=[{exp:t,el:e}];let r,l;for(;(r=e.nextElementSibling)&&(l=null,""===Ce(r,"v-else")||(l=Ce(r,"v-else-if")));)n.removeChild(r),o.push({exp:l,el:r});const a=e.nextSibling;n.removeChild(e);let h,c=-1;const u=()=>{h&&(n.insertBefore(i,h.el),h.remove(),h=void 0)};return s.effect((()=>{for(let e=0;e<o.length;e++){const{exp:t,el:r}=o[e];if(!t||He(s.scope,t))return void(e!==c&&(u(),h=new it(r,s),h.insert(n,i),n.removeChild(i),c=e))}c=-1,u()})),a})(s,n,t);if(n=Ce(s,"v-for"))return Fe(s,n,t);if((n=Ce(s,"v-scope"))||""===n){const e=n?He(t.scope,n):{};t=st(t,e),e.$template&&et(s,e.$template)}const i=null!=Ce(s,"v-once");i&&(Ve=!0),(n=Ce(s,"ref"))&&Ye(s,Ge,`"${n}"`,t),Xe(s,t);const o=[];for(const{name:e,value:n}of[...s.attributes])Ke.test(e)&&"v-cloak"!==e&&("v-model"===e?o.unshift([e,n]):"@"===e[0]||/^v-on\b/.test(e)?o.push([e,n]):Qe(s,e,n,t));for(const[e,n]of o)Qe(s,e,n,t);i&&(Ve=!1)}else if(3===s){const s=e.data;if(s.includes(t.delimiters[0])){let n,i=[],o=0;for(;n=t.delimitersRE.exec(s);){const e=s.slice(o,n.index);e&&i.push(JSON.stringify(e)),i.push(`$s(${n[1]})`),o=n.index+n[0].length}o<s.length&&i.push(JSON.stringify(s.slice(o))),Ye(e,$e,i.join("+"),t)}}else 11===s&&Xe(e,t)},Xe=(e,t)=>{let s=e.firstChild;for(;s;)s=Ze(s,t)||s.nextSibling},Qe=(e,t,s,n)=>{let i,o,r;if(":"===(t=t.replace(ze,((e,t)=>((r||(r={}))[t]=!0,""))))[0])i=be,o=t.slice(1);else if("@"===t[0])i=_e,o=t.slice(1);else{const e=t.indexOf(":"),s=e>0?t.slice(2,e):t.slice(2);i=De[s]||n.dirs[s],o=e>0?t.slice(e+1):void 0}i&&(i===be&&"ref"===o&&(i=Ge),Ye(e,i,s,n,o,r),e.removeAttribute(t))},Ye=(e,t,s,n,i,o)=>{const r=t({el:e,get:(t=s)=>He(n.scope,t,e),effect:n.effect,ctx:n,exp:s,arg:i,modifiers:o});r&&n.cleanups.push(r)},et=(e,t)=>{if("#"!==t[0])e.innerHTML=t;else{const s=document.querySelector(t);e.appendChild(s.content.cloneNode(!0))}},tt=e=>{const t={delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,...e,scope:e?e.scope:ae({}),dirs:e?e.dirs:{},effects:[],blocks:[],cleanups:[],effect:e=>{if(Ve)return me(e),e;const s=function(e,t){e.effect&&(e=e.effect.fn);const s=new B(e);t&&(h(s,t),t.scope&&$(s,t.scope)),(!t||!t.lazy)&&s.run();const n=s.run.bind(s);return n.effect=s,n}(e,{scheduler:()=>me(s)});return t.effects.push(s),s}};return t},st=(e,t={})=>{const s=e.scope,n=Object.create(s);Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)),n.$refs=Object.create(s.$refs);const i=ae(new Proxy(n,{set:(e,t,n,o)=>o!==i||e.hasOwnProperty(t)?Reflect.set(e,t,n,o):Reflect.set(s,t,n)}));return nt(i),{...e,scope:i}},nt=e=>{for(const t of Object.keys(e))"function"==typeof e[t]&&(e[t]=e[t].bind(e))};class it{constructor(e,s,n=!1){t(this,"template"),t(this,"ctx"),t(this,"key"),t(this,"parentCtx"),t(this,"isFragment"),t(this,"start"),t(this,"end"),this.isFragment=e instanceof HTMLTemplateElement,n?this.template=e:this.isFragment?this.template=e.content.cloneNode(!0):this.template=e.cloneNode(!0),n?this.ctx=s:(this.parentCtx=s,s.blocks.push(this),this.ctx=tt(s)),Ze(this.template,this.ctx)}get el(){return this.start||this.template}insert(e,t=null){if(this.isFragment)if(this.start){let s,n=this.start;for(;n&&(s=n.nextSibling,e.insertBefore(n,t),n!==this.end);)n=s}else this.start=new Text(""),this.end=new Text(""),e.insertBefore(this.end,t),e.insertBefore(this.start,this.end),e.insertBefore(this.template,this.end);else e.insertBefore(this.template,t)}remove(){if(this.parentCtx&&((e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)})(this.parentCtx.blocks,this),this.start){const e=this.start.parentNode;let t,s=this.start;for(;s&&(t=s.nextSibling,e.removeChild(s),s!==this.end);)s=t}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach((e=>{e.teardown()})),this.ctx.effects.forEach(q),this.ctx.cleanups.forEach((e=>e()))}}const ot=e=>e.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&"),rt=e=>{const t=tt();if(e&&(t.scope=ae(e),nt(t.scope),e.$delimiters)){const[s,n]=t.delimiters=e.$delimiters;t.delimitersRE=new RegExp(ot(s)+"([^]+?)"+ot(n),"g")}let s;return t.scope.$s=xe,t.scope.$nextTick=ge,t.scope.$refs=Object.create(null),{directive(e,s){return s?(t.dirs[e]=s,this):t.dirs[e]},mount(e){if("string"==typeof e&&!(e=document.querySelector(e)))return;let n;return n=(e=e||document.documentElement).hasAttribute("v-scope")?[e]:[...e.querySelectorAll("[v-scope]")].filter((e=>!e.matches("[v-scope] [v-scope]"))),n.length||(n=[e]),s=n.map((e=>new it(e,t,!0))),this},unmount(){s.forEach((e=>e.teardown()))}}},lt=document.currentScript;lt&&lt.hasAttribute("init")&&rt().mount();let at=e=>{if("function"==typeof e)return e;return function(){return e}};const ht="undefined"!=typeof self?self:null,ct="undefined"!=typeof window?window:null,ut=ht||ct||ut,dt=0,ft=1,pt=2,gt=3,mt="closed",yt="errored",vt="joined",bt="joining",wt="leaving",kt="phx_close",Et="phx_error",Ct="phx_join",Tt="phx_reply",St="phx_leave",jt="longpoll",Rt="websocket",_t=4;class $t{constructor(e,t,s,n){this.channel=e,this.event=t,this.payload=s||function(){return{}},this.receivedResp=null,this.timeout=n,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:s}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}class xt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class At{constructor(e,t,s){this.state=mt,this.topic=e,this.params=at(t||{}),this.socket=s,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new $t(this,Ct,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new xt((()=>{this.socket.isConnected()&&this.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((()=>this.rejoinTimer.reset()))),this.stateChangeRefs.push(this.socket.onOpen((()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()}))),this.joinPush.receive("ok",(()=>{this.state=vt,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this.joinPush.receive("error",(()=>{this.state=yt,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.onClose((()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=mt,this.socket.remove(this)})),this.onError((e=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,e),this.isJoining()&&this.joinPush.reset(),this.state=yt,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.joinPush.receive("timeout",(()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new $t(this,St,at({}),this.timeout).send(),this.state=yt,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.on(Tt,((e,t)=>{this.trigger(this.replyEventName(t),e)}))}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(kt,e)}onError(e){return this.on(Et,(t=>e(t)))}on(e,t){let s=this.bindingRef++;return this.bindings.push({event:e,ref:s,callback:t}),s}off(e,t){this.bindings=this.bindings.filter((s=>!(s.event===e&&(void 0===t||t===s.ref))))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,s=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let n=new $t(this,e,(function(){return t}),s);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=wt;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(kt,"leave")},s=new $t(this,St,at({}),e);return s.receive("ok",(()=>t())).receive("timeout",(()=>t())),s.send(),this.canPush()||s.trigger("ok",{}),s}onMessage(e,t,s){return t}isMember(e,t,s,n){return this.topic===e&&(!n||n===this.joinRef()||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:s,joinRef:n}),!1))}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=bt,this.joinPush.resend(e))}trigger(e,t,s,n){let i=this.onMessage(e,t,s,n);if(t&&!i)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let o=this.bindings.filter((t=>t.event===e));for(let e=0;e<o.length;e++){o[e].callback(i,s,n||this.joinRef())}}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===mt}isErrored(){return this.state===yt}isJoined(){return this.state===vt}isJoining(){return this.state===bt}isLeaving(){return this.state===wt}}class Ot{static request(e,t,s,n,i,o,r){if(ut.XDomainRequest){let s=new ut.XDomainRequest;return this.xdomainRequest(s,e,t,n,i,o,r)}{let l=new ut.XMLHttpRequest;return this.xhrRequest(l,e,t,s,n,i,o,r)}}static xdomainRequest(e,t,s,n,i,o,r){return e.timeout=i,e.open(t,s),e.onload=()=>{let t=this.parseJSON(e.responseText);r&&r(t)},o&&(e.ontimeout=o),e.onprogress=()=>{},e.send(n),e}static xhrRequest(e,t,s,n,i,o,r,l){return e.open(t,s,!0),e.timeout=o,e.setRequestHeader("Content-Type",n),e.onerror=()=>l&&l(null),e.onreadystatechange=()=>{if(e.readyState===_t&&l){let t=this.parseJSON(e.responseText);l(t)}},r&&(e.ontimeout=r),e.send(i),e}static parseJSON(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let s=[];for(var n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=t?`${t}[${n}]`:n,o=e[n];"object"==typeof o?s.push(this.serialize(o,i)):s.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}return s.join("&")}static appendParams(e,t){if(0===Object.keys(t).length)return e;let s=e.match(/\?/)?"&":"?";return`${e}${s}${this.serialize(t)}`}}class Pt{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=dt,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Rt),"$1/"+jt)}endpointURL(){return Ot.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,s){this.close(e,t,s),this.readyState=dt}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===ft||this.readyState===dt}poll(){this.ajax("GET",null,(()=>this.ontimeout()),(e=>{if(e){var{status:t,token:s,messages:n}=e;this.token=s}else t=0;switch(t){case 200:n.forEach((e=>{setTimeout((()=>this.onmessage({data:e})),0)})),this.poll();break;case 204:this.poll();break;case 410:this.readyState=ft,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}}))}send(e){this.ajax("POST",e,(()=>this.onerror("timeout")),(e=>{e&&200===e.status||(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1))}))}close(e,t,s){for(let e of this.reqs)e.abort();this.readyState=gt;let n=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:s});"undefined"!=typeof CloseEvent?this.onclose(new CloseEvent("close",n)):this.onclose(n)}ajax(e,t,s,n){let i;i=Ot.request(e,this.endpointURL(),"application/json",t,this.timeout,(()=>{this.reqs.delete(i),s()}),(e=>{this.reqs.delete(i),this.isActive()&&n(e)})),this.reqs.add(i)}}const It={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[s,n,i,o,r]=JSON.parse(e);return t({join_ref:s,ref:n,topic:i,event:o,payload:r})}},binaryEncode(e){let{join_ref:t,ref:s,event:n,topic:i,payload:o}=e,r=this.META_LENGTH+t.length+s.length+i.length+n.length,l=new ArrayBuffer(this.HEADER_LENGTH+r),a=new DataView(l),h=0;a.setUint8(h++,this.KINDS.push),a.setUint8(h++,t.length),a.setUint8(h++,s.length),a.setUint8(h++,i.length),a.setUint8(h++,n.length),Array.from(t,(e=>a.setUint8(h++,e.charCodeAt(0)))),Array.from(s,(e=>a.setUint8(h++,e.charCodeAt(0)))),Array.from(i,(e=>a.setUint8(h++,e.charCodeAt(0)))),Array.from(n,(e=>a.setUint8(h++,e.charCodeAt(0))));var c=new Uint8Array(l.byteLength+o.byteLength);return c.set(new Uint8Array(l),0),c.set(new Uint8Array(o),l.byteLength),c.buffer},binaryDecode(e){let t=new DataView(e),s=t.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.push:return this.decodePush(e,t,n);case this.KINDS.reply:return this.decodeReply(e,t,n);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,n)}},decodePush(e,t,s){let n=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),r=this.HEADER_LENGTH+this.META_LENGTH-1,l=s.decode(e.slice(r,r+n));r+=n;let a=s.decode(e.slice(r,r+i));r+=i;let h=s.decode(e.slice(r,r+o));return r+=o,{join_ref:l,ref:null,topic:a,event:h,payload:e.slice(r,e.byteLength)}},decodeReply(e,t,s){let n=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),r=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=s.decode(e.slice(l,l+n));l+=n;let h=s.decode(e.slice(l,l+i));l+=i;let c=s.decode(e.slice(l,l+o));l+=o;let u=s.decode(e.slice(l,l+r));l+=r;let d=e.slice(l,e.byteLength);return{join_ref:a,ref:h,topic:c,event:Tt,payload:{status:u,response:d}}},decodeBroadcast(e,t,s){let n=t.getUint8(1),i=t.getUint8(2),o=this.HEADER_LENGTH+2,r=s.decode(e.slice(o,o+n));o+=n;let l=s.decode(e.slice(o,o+i));return o+=i,{join_ref:null,ref:null,topic:r,event:l,payload:e.slice(o,e.byteLength)}}};class Lt{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||1e4,this.transport=t.transport||ut.WebSocket||Pt,this.establishedConnections=0,this.defaultEncoder=It.encode.bind(It),this.defaultDecoder=It.decode.bind(It),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Pt?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let s=null;ct&&ct.addEventListener&&(ct.addEventListener("pagehide",(e=>{this.conn&&(this.disconnect(),s=this.connectClock)})),ct.addEventListener("pageshow",(e=>{s===this.connectClock&&(s=null,this.connect())}))),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=e=>t.rejoinAfterMs?t.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4,this.reconnectAfterMs=e=>t.reconnectAfterMs?t.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=at(t.params||{}),this.endPoint=`${e}/${Rt}`,this.vsn=t.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new xt((()=>{this.teardown((()=>this.connect()))}),this.reconnectAfterMs)}getLongPollTransport(){return Pt}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=Ot.appendParams(Ot.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,s){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,s)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=at(e)),this.conn||(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e))}log(e,t,s){this.logger(e,t,s)}hasLogger(){return null!==this.logger}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),s=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let n=this.onMessage((i=>{i.ref===t&&(this.off([n]),e(Date.now()-s))}));return!0}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((([,e])=>e()))}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout((()=>this.sendHeartbeat()),this.heartbeatIntervalMs))}teardown(e,t,s){if(!this.conn)return e&&e();this.waitForBufferDone((()=>{this.conn&&(t?this.conn.close(t,s||""):this.conn.close()),this.waitForSocketClosed((()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()}))}))}waitForBufferDone(e,t=1){5!==t&&this.conn&&this.conn.bufferedAmount?setTimeout((()=>{this.waitForBufferDone(e,t+1)}),150*t):e()}waitForSocketClosed(e,t=1){5!==t&&this.conn&&this.conn.readyState!==gt?setTimeout((()=>{this.waitForSocketClosed(e,t+1)}),150*t):e()}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearTimeout(this.heartbeatTimer),this.closeWasClean||1e3===t||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((([,t])=>t(e)))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,s=this.establishedConnections;this.stateChangeCallbacks.error.forEach((([,n])=>{n(e,t,s)})),(t===this.transport||s>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach((e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(Et)}))}connectionState(){switch(this.conn&&this.conn.readyState){case dt:return"connecting";case ft:return"open";case pt:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter((t=>t.joinRef()!==e.joinRef()))}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter((([t])=>-1===e.indexOf(t)))}channel(e,t={}){let s=new At(e,t,this);return this.channels.push(s),s}push(e){if(this.hasLogger()){let{topic:t,event:s,payload:n,ref:i,join_ref:o}=e;this.log("push",`${t} ${s} (${o}, ${i})`,n)}this.isConnected()?this.encode(e,(e=>this.conn.send(e))):this.sendBuffer.push((()=>this.encode(e,(e=>this.conn.send(e)))))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout((()=>this.heartbeatTimeout()),this.heartbeatIntervalMs))}abnormalClose(e){this.closeWasClean=!1,this.isConnected()&&this.conn.close(1e3,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:s,payload:n,ref:i,join_ref:o}=e;i&&i===this.pendingHeartbeatRef&&(clearTimeout(this.heartbeatTimer),this.pendingHeartbeatRef=null,setTimeout((()=>this.sendHeartbeat()),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${n.status||""} ${t} ${s} ${i&&"("+i+")"||""}`,n);for(let e=0;e<this.channels.length;e++){const r=this.channels[e];r.isMember(t,s,n,o)&&r.trigger(s,n,i,o)}for(let t=0;t<this.stateChangeCallbacks.message.length;t++){let[,s]=this.stateChangeCallbacks.message[t];s(e)}}))}leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t.isJoined()||t.isJoining())));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}}const Mt=(e,t,s,n)=>{if(null==t)return;const i=new Date;if(i.getTime()-t.getTime()<15e3)return;let o=`https://${apiUrl}/listening_session/`;null!==s&&(o+=s);const r={date_time_start:t.toISOString(),date_time_end:i.toISOString(),source:"seo",ctrl:Math.random()};return!0===n&&(r.ending=!0),e.includes("-")?r.stream_id=e:r.radio_stream_code_name=`${e}_main`,fetch(o,{method:null!==s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>e.json())).then((e=>void 0!==e.id?e:null))},Ht=e=>{const t=document.getElementById("playing-alert");t&&(!0===e?t.classList.remove("d-none"):t.classList.add("d-none"))},Nt=e=>{e?window.audio.volume=e:"undefined"!=typeof appVolume&&(window.audio.volume=appVolume)};rt({hls:null,dash:null,socket:null,socketTimer:null,channels:{},playing:1,song:null,listeners:null,lastUpdated:null,radioId:null,playingStart:null,sessionId:null,listeningInterval:null,options:{webSocket:"undefined"==typeof appWebSocket||appWebSocket,sendStatistics:"undefined"==typeof appSendStatistics||appSendStatistics},play(e,t,s,n){Ht(!1),1!==this.playing&&this.stop(),null!==this.listeningInterval&&(clearInterval(this.listeningInterval),this.listeningInterval=null),this.options.sendStatistics&&sendGaEvent("play","SSR",t,3),this.playing=42,this.radioId=t,this.sessionId=null,this.playerStart=new Date,-1!==e.indexOf(".m3u8")?new Promise(((e,t)=>{if(null!==document.getElementById("hls-script"))return void e();const s=document.createElement("script");s.type="text/javascript",s.id="hls-script",s.src="/js/hls.min.js",s.onload=e,s.onerror=t,document.body.appendChild(s)})).then((()=>{Hls.isSupported()&&(window.audio=document.getElementById("videoplayer"),this.hls=new Hls,this.hls.attachMedia(window.audio),this.hls.on(Hls.Events.ERROR,((e,s)=>{s.fatal&&this.playingError(t,s.details)})),this.hls.on(Hls.Events.MEDIA_ATTACHED,(()=>{this.hls.loadSource(e),this.hls.on(Hls.Events.MANIFEST_PARSED,(()=>{Nt(),window.audio.play().then((()=>{this.playingStarted(s?s.trim():null,n?n.trim():null)}))}))})))})):-1!==e.indexOf(".mpd")?new Promise(((e,t)=>{if(null!==document.getElementById("dash-script"))return void e(!0);const s=document.createElement("script");s.type="text/javascript",s.id="dash-script",s.src="/js/dash.all.min.js",s.onload=e,s.onerror=t,document.body.appendChild(s)})).then((()=>{window.audio=document.getElementById("videoplayer"),this.dash=dashjs.MediaPlayer().create(),this.dash.initialize(window.audio,e,!1),this.dash.on("error",(()=>{this.playingError(t)})),this.dash.on("canPlay",(()=>{Nt(),window.audio.play().then((()=>{this.playingStarted(s?s.trim():null,n?n.trim():null)}))}))})):(window.audio=document.getElementById("videoplayer"),window.audio.src=e.trim(),Nt(),window.audio.onerror=i=>{if("https"!==e.trim().substring(0,5))return this.stop(),void this.play(`${streamsProxy}?k=${streamsProxyKey}&stream=${e}`,t,s,n);this.playingError(t,i.target.error.message||null)},window.audio.play().then((()=>{this.playingStarted(s?s.trim():null,n?n.trim():null)})))},stop(){void 0!==window.audio&&null!==window.audio&&window.audio.pause(),null!==this.listeningInterval&&(clearInterval(this.listeningInterval),this.listeningInterval=null),null!==this.hls&&(this.hls.destroy(),this.hls=null),null!==this.dash&&(this.dash.destroy(),this.dash=null),window.audio=null,delete window.audio,!1!==this.playing&&this.options.sendStatistics&&(Mt(this.radioId,this.playingStart,this.sessionId,!0),sendGaEvent("stop","SSR",this.radioId,1)),this.playing=1,this.radioId=null,this.listeningInterval=null,this.sessionId=null,this.playingStart=null},playingStarted(e,t){this.playing=3,this.lastUpdated=new Date,this.playingStart=new Date,this.options.sendStatistics&&(this.listeningInterval=setInterval((()=>{Mt(this.radioId,this.playingStart,this.sessionId).then((e=>{null!==e.id&&(this.sessionId=e.id,this.playingStart=new Date(e.date_time_start))}))}),15e3)),window.audio.addEventListener("timeupdate",(()=>{this.lastUpdated=new Date})),null!=e&&""!==e&&this.joinChannel(e.trim()),null!=t&&""!==t&&this.joinChannel(`listeners:${t}`)},playingError(e,t){setTimeout((()=>{this.playing=1,Ht(!0),this.options.sendStatistics&&((e,t)=>{if(!e.includes("-"))return;let s=`https://${apiUrl}/stream_error/${e}`;const n={};t&&(n.error=t),fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json()))})(e,t)}),2500)},connectSocket(){if(this.options.webSocket){if(!this.socket){const e={heartbeatIntervalMs:5e4,reconnectAfterMs:e=>e>=50?null:[10,50,100,150,200,250,500,1e3,2e3,5e3,1e4,2e4][e-1]||3e4};this.socket=new Lt(`wss://${apiUrl}/socket`,e),this.socket.onOpen((()=>{this.setSocketTimer()})),this.socket.onClose((()=>{this.song=null,this.listeners=null,this.clearSocketTimer()}))}this.socket&&!this.socket.isConnected()&&this.socket.connect()}},setSocketTimer(){this.clearSocketTimer(),this.socketTimer=setTimeout((()=>{this.socket&&(this.socket.disconnect(),this.socketTimer=null)}),36e6)},clearSocketTimer(){this.socketTimer&&(clearTimeout(this.socketTimer),this.socketTimer=null)},joinChannel(e){this.options.webSocket&&(this.connectSocket(),Object.prototype.hasOwnProperty.call(this.channels,e)||(this.channels[e]=this.socket.channel(e,{}),this.channels[e].join().receive("error",(t=>{e.startsWith("listeners:")?this.listeners=null:this.song=null})).receive("timeout",(()=>{e.startsWith("listeners:")?this.listeners=null:this.song=null})),this.channels[e].on("playing",(e=>{this.formatSong(e)})),this.channels[e].on("counter_update",(e=>{this.formatListeners(e)})),this.channels[e].on("quit",(()=>{this.song=null,this.listeners=null,this.channels[e]=null,delete this.channels[e]}))))},formatSong(e){if(null===!e||!e.song)return void(this.song=null);let t="",s=!1;void 0!==e.song.artist&&null!==e.song.artist&&""!==e.song.artist&&(t+=e.song.artist,s=!0),void 0!==e.song.title&&null!==e.song.title&&""!==e.song.title&&(!0===s&&(t+=" - "),t+=e.song.title),this.song=""===t?null:t},formatListeners(e){e&&e.listeners&&0!==!e.listeners?this.listeners=e.listeners:this.listeners=null}}).mount()})();
{% endverbatim %}
</script>
