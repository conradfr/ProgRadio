<audio id="videoplayer" playsinline="playsinline" style="display:none"></audio>
<script type="text/javascript">
  const PLAYER_STATE_STOPPED = 1;
  const PLAYER_STATE_PLAYING = 3;
  const PLAYER_STATE_LOADING = 42;
</script>
<script type="module">
{% verbatim %}
var bt=Object.defineProperty,Et=(t,e,s)=>e in t?bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,L=(t,e,s)=>(Et(t,typeof e!="symbol"?e+"":e,s),s);function St(t,e){const s=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return i=>!!s[i]}function Ke(t){if(y(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],i=B(n)?Ct(n):Ke(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(B(t)||O(t))return t}const wt=/;(?![^(]*\))/g,Tt=/:(.+)/;function Ct(t){const e={};return t.split(wt).forEach(s=>{if(s){const n=s.split(Tt);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Fe(t){let e="";if(B(t))e=t;else if(y(t))for(let s=0;s<t.length;s++){const n=Fe(t[s]);n&&(e+=n+" ")}else if(O(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}function kt(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=H(t[n],e[n]);return s}function H(t,e){if(t===e)return!0;let s=Ae(t),n=Ae(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=y(t),n=y(e),s||n)return s&&n?kt(t,e):!1;if(s=O(t),n=O(e),s||n){if(!s||!n)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const l=t.hasOwnProperty(o),h=e.hasOwnProperty(o);if(l&&!h||!l&&h||!H(t[o],e[o]))return!1}}return String(t)===String(e)}function oe(t,e){return t.findIndex(s=>H(s,e))}const _t=Object.assign,Rt=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},jt=Object.prototype.hasOwnProperty,we=(t,e)=>jt.call(t,e),y=Array.isArray,le=t=>Ve(t)==="[object Map]",Ae=t=>t instanceof Date,B=t=>typeof t=="string",Te=t=>typeof t=="symbol",O=t=>t!==null&&typeof t=="object",At=Object.prototype.toString,Ve=t=>At.call(t),Ot=t=>Ve(t).slice(8,-1),Ce=t=>B(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qe=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},$t=/-(\w)/g,xt=qe(t=>t.replace($t,(e,s)=>s?s.toUpperCase():"")),Pt=/\B([A-Z])/g,Xe=qe(t=>t.replace(Pt,"-$1").toLowerCase()),Lt=(t,e)=>!Object.is(t,e),Oe=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let It;function Ye(t,e){e=e||It,e&&e.active&&e.effects.push(t)}const Ze=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Qe=t=>(t.w&$)>0,et=t=>(t.n&$)>0,Nt=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=$},Mt=t=>{const{deps:e}=t;if(e.length){let s=0;for(let n=0;n<e.length;n++){const i=e[n];Qe(i)&&!et(i)?i.delete(t):e[s++]=i,i.w&=~$,i.n&=~$}e.length=s}},ue=new WeakMap;let z=0,$=1;const fe=30,D=[];let I;const Z=Symbol(""),$e=Symbol("");class Ht{constructor(e,s=null,n){this.fn=e,this.scheduler=s,this.active=!0,this.deps=[],Ye(this,n)}run(){if(!this.active)return this.fn();if(!D.includes(this))try{return D.push(I=this),Wt(),$=1<<++z,z<=fe?Nt(this):xe(this),this.fn()}finally{z<=fe&&Mt(this),$=1<<--z,tt(),D.pop();const e=D.length;I=e>0?D[e-1]:void 0}}stop(){this.active&&(xe(this),this.onStop&&this.onStop(),this.active=!1)}}function xe(t){const{deps:e}=t;if(e.length){for(let s=0;s<e.length;s++)e[s].delete(t);e.length=0}}function Bt(t,e){t.effect&&(t=t.effect.fn);const s=new Ht(t);e&&(_t(s,e),e.scope&&Ye(s,e.scope)),(!e||!e.lazy)&&s.run();const n=s.run.bind(s);return n.effect=s,n}function Ut(t){t.effect.stop()}let U=!0;const ke=[];function Dt(){ke.push(U),U=!1}function Wt(){ke.push(U),U=!0}function tt(){const t=ke.pop();U=t===void 0?!0:t}function te(t,e,s){if(!zt())return;let n=ue.get(t);n||ue.set(t,n=new Map);let i=n.get(s);i||n.set(s,i=Ze()),Gt(i)}function zt(){return U&&I!==void 0}function Gt(t,e){let s=!1;z<=fe?et(t)||(t.n|=$,s=!Qe(t)):s=!t.has(I),s&&(t.add(I),I.deps.push(t))}function de(t,e,s,n,i,r){const o=ue.get(t);if(!o)return;let l=[];if(e==="clear")l=[...o.values()];else if(s==="length"&&y(t))o.forEach((h,a)=>{(a==="length"||a>=n)&&l.push(h)});else switch(s!==void 0&&l.push(o.get(s)),e){case"add":y(t)?Ce(s)&&l.push(o.get("length")):(l.push(o.get(Z)),le(t)&&l.push(o.get($e)));break;case"delete":y(t)||(l.push(o.get(Z)),le(t)&&l.push(o.get($e)));break;case"set":le(t)&&l.push(o.get(Z));break}if(l.length===1)l[0]&&Pe(l[0]);else{const h=[];for(const a of l)a&&h.push(...a);Pe(Ze(h))}}function Pe(t,e){for(const s of y(t)?t:[...t])(s!==I||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const Jt=St("__proto__,__v_isRef,__isVue"),st=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Te)),Kt=nt(),Ft=nt(!0),Le=Vt();function Vt(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...s){const n=N(this);for(let r=0,o=this.length;r<o;r++)te(n,"get",r+"");const i=n[e](...s);return i===-1||i===!1?n[e](...s.map(N)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...s){Dt();const n=N(this)[e].apply(this,s);return tt(),n}}),t}function nt(t=!1,e=!1){return function(s,n,i){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_raw"&&i===(t?e?ns:rt:e?ss:it).get(s))return s;const r=y(s);if(!t&&r&&we(Le,n))return Reflect.get(Le,n,i);const o=Reflect.get(s,n,i);return(Te(n)?st.has(n):Jt(n))||(t||te(s,"get",n),e)?o:pe(o)?!r||!Ce(n)?o.value:o:O(o)?t?os(o):se(o):o}}const qt=Xt();function Xt(t=!1){return function(e,s,n,i){let r=e[s];if(!t&&!ls(n)&&(n=N(n),r=N(r),!y(e)&&pe(r)&&!pe(n)))return r.value=n,!0;const o=y(e)&&Ce(s)?Number(s)<e.length:we(e,s),l=Reflect.set(e,s,n,i);return e===N(i)&&(o?Lt(n,r)&&de(e,"set",s,n):de(e,"add",s,n)),l}}function Yt(t,e){const s=we(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&de(t,"delete",e,void 0),n}function Zt(t,e){const s=Reflect.has(t,e);return(!Te(e)||!st.has(e))&&te(t,"has",e),s}function Qt(t){return te(t,"iterate",y(t)?"length":Z),Reflect.ownKeys(t)}const es={get:Kt,set:qt,deleteProperty:Yt,has:Zt,ownKeys:Qt},ts={get:Ft,set(t,e){return!0},deleteProperty(t,e){return!0}},it=new WeakMap,ss=new WeakMap,rt=new WeakMap,ns=new WeakMap;function is(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rs(t){return t.__v_skip||!Object.isExtensible(t)?0:is(Ot(t))}function se(t){return t&&t.__v_isReadonly?t:ot(t,!1,es,null,it)}function os(t){return ot(t,!0,ts,null,rt)}function ot(t,e,s,n,i){if(!O(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=rs(t);if(o===0)return t;const l=new Proxy(t,o===2?n:s);return i.set(t,l),l}function ls(t){return!!(t&&t.__v_isReadonly)}function N(t){const e=t&&t.__v_raw;return e?N(e):t}function pe(t){return!!(t&&t.__v_isRef===!0)}Promise.resolve();let ge=!1;const Q=[],hs=Promise.resolve(),ne=t=>hs.then(t),Ie=t=>{Q.includes(t)||Q.push(t),ge||(ge=!0,ne(as))},as=()=>{for(const t of Q)t();Q.length=0,ge=!1},cs=/^(spellcheck|draggable|form|list|type)$/,me=({el:t,get:e,effect:s,arg:n,modifiers:i})=>{let r;n==="class"&&(t._class=t.className),s(()=>{let o=e();if(n)i!=null&&i.camel&&(n=xt(n)),he(t,n,o,r);else{for(const l in o)he(t,l,o[l],r&&r[l]);for(const l in r)(!o||!(l in o))&&he(t,l,null)}r=o})},he=(t,e,s,n)=>{if(e==="class")t.setAttribute("class",Fe(t._class?[t._class,s]:s)||"");else if(e==="style"){s=Ke(s);const{style:i}=t;if(!s)t.removeAttribute("style");else if(B(s))s!==n&&(i.cssText=s);else{for(const r in s)ye(i,r,s[r]);if(n&&!B(n))for(const r in n)s[r]==null&&ye(i,r,"")}}else!(t instanceof SVGElement)&&e in t&&!cs.test(e)?(t[e]=s,e==="value"&&(t._value=s)):e==="true-value"?t._trueValue=s:e==="false-value"?t._falseValue=s:s!=null?t.setAttribute(e,s):t.removeAttribute(e)},Ne=/\s*!important$/,ye=(t,e,s)=>{y(s)?s.forEach(n=>ye(t,e,n)):e.startsWith("--")?t.setProperty(e,s):Ne.test(s)?t.setProperty(Xe(e),s.replace(Ne,""),"important"):t[e]=s},A=(t,e)=>{const s=t.getAttribute(e);return s!=null&&t.removeAttribute(e),s},j=(t,e,s,n)=>{t.addEventListener(e,s,n)},us=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,fs=["ctrl","shift","alt","meta"],ds={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>fs.some(s=>t[`${s}Key`]&&!e[s])},lt=({el:t,get:e,exp:s,arg:n,modifiers:i})=>{if(!n)return;let r=us.test(s)?e(`(e => ${s}(e))`):e(`($event => { ${s} })`);if(n==="vue:mounted"){ne(r);return}else if(n==="vue:unmounted")return()=>r();if(i){n==="click"&&(i.right&&(n="contextmenu"),i.middle&&(n="mouseup"));const o=r;r=l=>{if(!("key"in l&&!(Xe(l.key)in i))){for(const h in i){const a=ds[h];if(a&&a(l,i))return}return o(l)}}}j(t,n,r,i)},ps=({el:t,get:e,effect:s})=>{const n=t.style.display;s(()=>{t.style.display=e()?n:"none"})},ht=({el:t,get:e,effect:s})=>{s(()=>{t.textContent=at(e())})},at=t=>t==null?"":O(t)?JSON.stringify(t,null,2):String(t),gs=({el:t,get:e,effect:s})=>{s(()=>{t.innerHTML=e()})},ms=({el:t,exp:e,get:s,effect:n,modifiers:i})=>{const r=t.type,o=s(`(val) => { ${e} = val }`),{trim:l,number:h=r==="number"}=i||{};if(t.tagName==="SELECT"){const a=t;j(t,"change",()=>{const c=Array.prototype.filter.call(a.options,u=>u.selected).map(u=>h?Oe(R(u)):R(u));o(a.multiple?c:c[0])}),n(()=>{const c=s(),u=a.multiple;for(let f=0,v=a.options.length;f<v;f++){const b=a.options[f],S=R(b);if(u)y(c)?b.selected=oe(c,S)>-1:b.selected=c.has(S);else if(H(R(b),c)){a.selectedIndex!==f&&(a.selectedIndex=f);return}}!u&&a.selectedIndex!==-1&&(a.selectedIndex=-1)})}else if(r==="checkbox"){j(t,"change",()=>{const c=s(),u=t.checked;if(y(c)){const f=R(t),v=oe(c,f),b=v!==-1;if(u&&!b)o(c.concat(f));else if(!u&&b){const S=[...c];S.splice(v,1),o(S)}}else o(Me(t,u))});let a;n(()=>{const c=s();y(c)?t.checked=oe(c,R(t))>-1:c!==a&&(t.checked=H(c,Me(t,!0))),a=c})}else if(r==="radio"){j(t,"change",()=>{o(R(t))});let a;n(()=>{const c=s();c!==a&&(t.checked=H(c,R(t)))})}else{const a=c=>l?c.trim():h?Oe(c):c;j(t,"compositionstart",ys),j(t,"compositionend",vs),j(t,i!=null&&i.lazy?"change":"input",()=>{t.composing||o(a(t.value))}),l&&j(t,"change",()=>{t.value=t.value.trim()}),n(()=>{if(t.composing)return;const c=t.value,u=s();document.activeElement===t&&a(c)===u||c!==u&&(t.value=u)})}},R=t=>"_value"in t?t._value:t.value,Me=(t,e)=>{const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e},ys=t=>{t.target.composing=!0},vs=t=>{const e=t.target;e.composing&&(e.composing=!1,bs(e,"input"))},bs=(t,e)=>{const s=document.createEvent("HTMLEvents");s.initEvent(e,!0,!0),t.dispatchEvent(s)},He=Object.create(null),F=(t,e,s)=>ct(t,`return(${e})`,s),ct=(t,e,s)=>{const n=He[e]||(He[e]=Es(e));try{return n(t,s)}catch(i){console.error(i)}},Es=t=>{try{return new Function("$data","$el",`with($data){${t}}`)}catch(e){return console.error(`${e.message} in expression: ${t}`),()=>{}}},Ss=({el:t,ctx:e,exp:s,effect:n})=>{ne(()=>n(()=>ct(e.scope,s,t)))},ws={bind:me,on:lt,show:ps,text:ht,html:gs,model:ms,effect:Ss},Ts=(t,e,s)=>{const n=t.parentElement,i=new Comment("v-if");n.insertBefore(i,t);const r=[{exp:e,el:t}];let o,l;for(;(o=t.nextElementSibling)&&(l=null,A(o,"v-else")===""||(l=A(o,"v-else-if")));)n.removeChild(o),r.push({exp:l,el:o});const h=t.nextSibling;n.removeChild(t);let a,c=-1;const u=()=>{a&&(n.insertBefore(i,a.el),a.remove(),a=void 0)};return s.effect(()=>{for(let f=0;f<r.length;f++){const{exp:v,el:b}=r[f];if(!v||F(s.scope,v)){f!==c&&(u(),a=new _e(b,s),a.insert(n,i),n.removeChild(i),c=f);return}}c=-1,u()}),h},Cs=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Be=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ks=/^\(|\)$/g,_s=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,Rs=(t,e,s)=>{const n=e.match(Cs);if(!n)return;const i=t.nextSibling,r=t.parentElement,o=new Text("");r.insertBefore(o,t),r.removeChild(t);const l=n[2].trim();let h=n[1].trim().replace(ks,"").trim(),a,c=!1,u,f,v="key",b=t.getAttribute(v)||t.getAttribute(v=":key")||t.getAttribute(v="v-bind:key");b&&(t.removeAttribute(v),v==="key"&&(b=JSON.stringify(b)));let S;(S=h.match(Be))&&(h=h.replace(Be,"").trim(),u=S[1].trim(),S[2]&&(f=S[2].trim())),(S=h.match(_s))&&(a=S[1].split(",").map(g=>g.trim()),c=h[0]==="[");let Re=!1,x,V,ie;const vt=g=>{const w=new Map,d=[];if(y(g))for(let p=0;p<g.length;p++)d.push(re(w,g[p],p));else if(typeof g=="number")for(let p=0;p<g;p++)d.push(re(w,p+1,p));else if(O(g)){let p=0;for(const m in g)d.push(re(w,g[m],p++,m))}return[d,w]},re=(g,w,d,p)=>{const m={};a?a.forEach((P,_)=>m[P]=w[c?_:P]):m[h]=w,p?(u&&(m[u]=p),f&&(m[f]=d)):u&&(m[u]=d);const M=pt(s,m),T=b?F(M.scope,b):d;return g.set(T,d),M.key=T,M},je=(g,w)=>{const d=new _e(t,g);return d.key=g.key,d.insert(r,w),d};return s.effect(()=>{const g=F(s.scope,l),w=ie;if([V,ie]=vt(g),!Re)x=V.map(d=>je(d,o)),Re=!0;else{for(let T=0;T<x.length;T++)ie.has(x[T].key)||x[T].remove();const d=[];let p=V.length,m,M;for(;p--;){const T=V[p],P=w.get(T.key);let _;P==null?_=je(T,m?m.el:o):(_=x[P],Object.assign(_.ctx.scope,T.scope),P!==p&&(x[P+1]!==m||M===m)&&(M=_,_.insert(r,m?m.el:o))),d.unshift(m=_)}x=d}}),i},ut=({el:t,ctx:{scope:{$refs:e}},get:s,effect:n})=>{let i;return n(()=>{const r=s();e[r]=t,i&&r!==i&&delete e[i],i=r}),()=>{i&&delete e[i]}},js=/^(?:v-|:|@)/,As=/\.([\w-]+)/g;let ve=!1;const ft=(t,e)=>{const s=t.nodeType;if(s===1){const n=t;if(n.hasAttribute("v-pre"))return;A(n,"v-cloak");let i;if(i=A(n,"v-if"))return Ts(n,i,e);if(i=A(n,"v-for"))return Rs(n,i,e);if((i=A(n,"v-scope"))||i===""){const l=i?F(e.scope,i):{};e=pt(e,l),l.$template&&Os(n,l.$template)}const r=A(n,"v-once")!=null;r&&(ve=!0),(i=A(n,"ref"))&&be(n,ut,`"${i}"`,e),Ue(n,e);const o=[];for(const{name:l,value:h}of[...n.attributes])js.test(l)&&l!=="v-cloak"&&(l==="v-model"?o.unshift([l,h]):l[0]==="@"||/^v-on\b/.test(l)?o.push([l,h]):De(n,l,h,e));for(const[l,h]of o)De(n,l,h,e);r&&(ve=!1)}else if(s===3){const n=t.data;if(n.includes(e.delimiters[0])){let i=[],r=0,o;for(;o=e.delimitersRE.exec(n);){const l=n.slice(r,o.index);l&&i.push(JSON.stringify(l)),i.push(`$s(${o[1]})`),r=o.index+o[0].length}r<n.length&&i.push(JSON.stringify(n.slice(r))),be(t,ht,i.join("+"),e)}}else s===11&&Ue(t,e)},Ue=(t,e)=>{let s=t.firstChild;for(;s;)s=ft(s,e)||s.nextSibling},De=(t,e,s,n)=>{let i,r,o;if(e=e.replace(As,(l,h)=>((o||(o={}))[h]=!0,"")),e[0]===":")i=me,r=e.slice(1);else if(e[0]==="@")i=lt,r=e.slice(1);else{const l=e.indexOf(":"),h=l>0?e.slice(2,l):e.slice(2);i=ws[h]||n.dirs[h],r=l>0?e.slice(l+1):void 0}i&&(i===me&&r==="ref"&&(i=ut),be(t,i,s,n,r,o),t.removeAttribute(e))},be=(t,e,s,n,i,r)=>{const o=e({el:t,get:(l=s)=>F(n.scope,l,t),effect:n.effect,ctx:n,exp:s,arg:i,modifiers:r});o&&n.cleanups.push(o)},Os=(t,e)=>{if(e[0]==="#"){const s=document.querySelector(e);t.appendChild(s.content.cloneNode(!0));return}t.innerHTML=e},dt=t=>{const e={delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,...t,scope:t?t.scope:se({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:s=>{if(ve)return Ie(s),s;const n=Bt(s,{scheduler:()=>Ie(n)});return e.effects.push(n),n}};return e},pt=(t,e={})=>{const s=t.scope,n=Object.create(s);Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),n.$refs=Object.create(s.$refs);const i=se(new Proxy(n,{set(r,o,l,h){return h===i&&!r.hasOwnProperty(o)?Reflect.set(s,o,l):Reflect.set(r,o,l,h)}}));return gt(i),{...t,scope:i}},gt=t=>{for(const e of Object.keys(t))typeof t[e]=="function"&&(t[e]=t[e].bind(t))};class _e{constructor(e,s,n=!1){L(this,"template"),L(this,"ctx"),L(this,"key"),L(this,"parentCtx"),L(this,"isFragment"),L(this,"start"),L(this,"end"),this.isFragment=e instanceof HTMLTemplateElement,n?this.template=e:this.isFragment?this.template=e.content.cloneNode(!0):this.template=e.cloneNode(!0),n?this.ctx=s:(this.parentCtx=s,s.blocks.push(this),this.ctx=dt(s)),ft(this.template,this.ctx)}get el(){return this.start||this.template}insert(e,s=null){if(this.isFragment)if(this.start){let n=this.start,i;for(;n&&(i=n.nextSibling,e.insertBefore(n,s),n!==this.end);)n=i}else this.start=new Text(""),this.end=new Text(""),e.insertBefore(this.end,s),e.insertBefore(this.start,this.end),e.insertBefore(this.template,this.end);else e.insertBefore(this.template,s)}remove(){if(this.parentCtx&&Rt(this.parentCtx.blocks,this),this.start){const e=this.start.parentNode;let s=this.start,n;for(;s&&(n=s.nextSibling,e.removeChild(s),s!==this.end);)s=n}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(e=>{e.teardown()}),this.ctx.effects.forEach(Ut),this.ctx.cleanups.forEach(e=>e())}}const We=t=>t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&"),mt=t=>{const e=dt();if(t&&(e.scope=se(t),gt(e.scope),t.$delimiters)){const[n,i]=e.delimiters=t.$delimiters;e.delimitersRE=new RegExp(We(n)+"([^]+?)"+We(i),"g")}e.scope.$s=at,e.scope.$nextTick=ne,e.scope.$refs=Object.create(null);let s;return{directive(n,i){return i?(e.dirs[n]=i,this):e.dirs[n]},mount(n){if(typeof n=="string"&&(n=document.querySelector(n),!n))return;n=n||document.documentElement;let i;return n.hasAttribute("v-scope")?i=[n]:i=[...n.querySelectorAll("[v-scope]")].filter(r=>!r.matches("[v-scope] [v-scope]")),i.length||(i=[n]),s=i.map(r=>new _e(r,e,!0)),this},unmount(){s.forEach(n=>n.teardown())}}},ze=document.currentScript;ze&&ze.hasAttribute("init")&&mt().mount();let J=t=>typeof t=="function"?t:function(){return t};const $s=typeof self<"u"?self:null,G=typeof window<"u"?window:null,K=$s||G||K,xs="2.0.0",C={connecting:0,open:1,closing:2,closed:3},Ps=1e4,Ls=1e3,E={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},k={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Ee={longpoll:"longpoll",websocket:"websocket"},Is={complete:4};class q{constructor(e,s,n,i){this.channel=e,this.event=s,this.payload=n||function(){return{}},this.receivedResp=null,this.timeout=i,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,s){return this.hasReceived(e)&&s(this.receivedResp.response),this.recHooks.push({status:e,callback:s}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:s,_ref:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(s))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,s){this.channel.trigger(this.refEvent,{status:e,response:s})}}class yt{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ns{constructor(e,s,n){this.state=E.closed,this.topic=e,this.params=J(s||{}),this.socket=n,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new q(this,k.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new yt(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=E.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=E.closed,this.socket.remove(this)}),this.onError(i=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,i),this.isJoining()&&this.joinPush.reset(),this.state=E.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new q(this,k.leave,J({}),this.timeout).send(),this.state=E.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(k.reply,(i,r)=>{this.trigger(this.replyEventName(r),i)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(k.close,e)}onError(e){return this.on(k.error,s=>e(s))}on(e,s){let n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:s}),n}off(e,s){this.bindings=this.bindings.filter(n=>!(n.event===e&&(typeof s>"u"||s===n.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,s,n=this.timeout){if(s=s||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let i=new q(this,e,function(){return s},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=E.leaving;let s=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(k.close,"leave")},n=new q(this,k.leave,J({}),e);return n.receive("ok",()=>s()).receive("timeout",()=>s()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,s,n){return s}isMember(e,s,n,i){return this.topic!==e?!1:i&&i!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:s,payload:n,joinRef:i}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(e))}trigger(e,s,n,i){let r=this.onMessage(e,s,n,i);if(s&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let o=this.bindings.filter(l=>l.event===e);for(let l=0;l<o.length;l++)o[l].callback(r,n,i||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===E.closed}isErrored(){return this.state===E.errored}isJoined(){return this.state===E.joined}isJoining(){return this.state===E.joining}isLeaving(){return this.state===E.leaving}}class ee{static request(e,s,n,i,r,o,l){if(K.XDomainRequest){let h=new K.XDomainRequest;return this.xdomainRequest(h,e,s,i,r,o,l)}else{let h=new K.XMLHttpRequest;return this.xhrRequest(h,e,s,n,i,r,o,l)}}static xdomainRequest(e,s,n,i,r,o,l){return e.timeout=r,e.open(s,n),e.onload=()=>{let h=this.parseJSON(e.responseText);l&&l(h)},o&&(e.ontimeout=o),e.onprogress=()=>{},e.send(i),e}static xhrRequest(e,s,n,i,r,o,l,h){return e.open(s,n,!0),e.timeout=o,e.setRequestHeader("Content-Type",i),e.onerror=()=>h&&h(null),e.onreadystatechange=()=>{if(e.readyState===Is.complete&&h){let a=this.parseJSON(e.responseText);h(a)}},l&&(e.ontimeout=l),e.send(r),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,s){let n=[];for(var i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;let r=s?`${s}[${i}]`:i,o=e[i];typeof o=="object"?n.push(this.serialize(o,r)):n.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}return n.join("&")}static appendParams(e,s){if(Object.keys(s).length===0)return e;let n=e.match(/\?/)?"&":"?";return`${e}${n}${this.serialize(s)}`}}class ae{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=C.connecting,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ee.websocket),"$1/"+Ee.longpoll)}endpointURL(){return ee.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,s,n){this.close(e,s,n),this.readyState=C.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===C.open||this.readyState===C.connecting}poll(){this.ajax("GET",null,()=>this.ontimeout(),e=>{if(e){var{status:s,token:n,messages:i}=e;this.token=n}else s=0;switch(s){case 200:i.forEach(r=>{setTimeout(()=>this.onmessage({data:r}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=C.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${s}`)}})}send(e){this.ajax("POST",e,()=>this.onerror("timeout"),s=>{(!s||s.status!==200)&&(this.onerror(s&&s.status),this.closeAndRetry(1011,"internal server error",!1))})}close(e,s,n){for(let r of this.reqs)r.abort();this.readyState=C.closed;let i=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:s,wasClean:n});typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",i)):this.onclose(i)}ajax(e,s,n,i){let r,o=()=>{this.reqs.delete(r),n()};r=ee.request(e,this.endpointURL(),"application/json",s,this.timeout,o,l=>{this.reqs.delete(r),this.isActive()&&i(l)}),this.reqs.add(r)}}const X={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(t,e){if(t.payload.constructor===ArrayBuffer)return e(this.binaryEncode(t));{let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(s))}},decode(t,e){if(t.constructor===ArrayBuffer)return e(this.binaryDecode(t));{let[s,n,i,r,o]=JSON.parse(t);return e({join_ref:s,ref:n,topic:i,event:r,payload:o})}},binaryEncode(t){let{join_ref:e,ref:s,event:n,topic:i,payload:r}=t,o=this.META_LENGTH+e.length+s.length+i.length+n.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),h=new DataView(l),a=0;h.setUint8(a++,this.KINDS.push),h.setUint8(a++,e.length),h.setUint8(a++,s.length),h.setUint8(a++,i.length),h.setUint8(a++,n.length),Array.from(e,u=>h.setUint8(a++,u.charCodeAt(0))),Array.from(s,u=>h.setUint8(a++,u.charCodeAt(0))),Array.from(i,u=>h.setUint8(a++,u.charCodeAt(0))),Array.from(n,u=>h.setUint8(a++,u.charCodeAt(0)));var c=new Uint8Array(l.byteLength+r.byteLength);return c.set(new Uint8Array(l),0),c.set(new Uint8Array(r),l.byteLength),c.buffer},binaryDecode(t){let e=new DataView(t),s=e.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.push:return this.decodePush(t,e,n);case this.KINDS.reply:return this.decodeReply(t,e,n);case this.KINDS.broadcast:return this.decodeBroadcast(t,e,n)}},decodePush(t,e,s){let n=e.getUint8(1),i=e.getUint8(2),r=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=s.decode(t.slice(o,o+n));o=o+n;let h=s.decode(t.slice(o,o+i));o=o+i;let a=s.decode(t.slice(o,o+r));o=o+r;let c=t.slice(o,t.byteLength);return{join_ref:l,ref:null,topic:h,event:a,payload:c}},decodeReply(t,e,s){let n=e.getUint8(1),i=e.getUint8(2),r=e.getUint8(3),o=e.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,h=s.decode(t.slice(l,l+n));l=l+n;let a=s.decode(t.slice(l,l+i));l=l+i;let c=s.decode(t.slice(l,l+r));l=l+r;let u=s.decode(t.slice(l,l+o));l=l+o;let f=t.slice(l,t.byteLength),v={status:u,response:f};return{join_ref:h,ref:a,topic:c,event:k.reply,payload:v}},decodeBroadcast(t,e,s){let n=e.getUint8(1),i=e.getUint8(2),r=this.HEADER_LENGTH+2,o=s.decode(t.slice(r,r+n));r=r+n;let l=s.decode(t.slice(r,r+i));r=r+i;let h=t.slice(r,t.byteLength);return{join_ref:null,ref:null,topic:o,event:l,payload:h}}};class Ms{constructor(e,s={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=s.timeout||Ps,this.transport=s.transport||K.WebSocket||ae,this.establishedConnections=0,this.defaultEncoder=X.encode.bind(X),this.defaultDecoder=X.decode.bind(X),this.closeWasClean=!1,this.binaryType=s.binaryType||"arraybuffer",this.connectClock=1,this.transport!==ae?(this.encode=s.encode||this.defaultEncoder,this.decode=s.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let n=null;G&&G.addEventListener&&(G.addEventListener("pagehide",i=>{this.conn&&(this.disconnect(),n=this.connectClock)}),G.addEventListener("pageshow",i=>{n===this.connectClock&&(n=null,this.connect())})),this.heartbeatIntervalMs=s.heartbeatIntervalMs||3e4,this.rejoinAfterMs=i=>s.rejoinAfterMs?s.rejoinAfterMs(i):[1e3,2e3,5e3][i-1]||1e4,this.reconnectAfterMs=i=>s.reconnectAfterMs?s.reconnectAfterMs(i):[10,50,100,150,200,250,500,1e3,2e3][i-1]||5e3,this.logger=s.logger||null,this.longpollerTimeout=s.longpollerTimeout||2e4,this.params=J(s.params||{}),this.endPoint=`${e}/${Ee.websocket}`,this.vsn=s.vsn||xs,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new yt(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return ae}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=ee.appendParams(ee.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,s,n){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,s,n)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=J(e)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=s=>this.onConnError(s),this.conn.onmessage=s=>this.onConnMessage(s),this.conn.onclose=s=>this.onConnClose(s))}log(e,s,n){this.logger(e,s,n)}hasLogger(){return this.logger!==null}onOpen(e){let s=this.makeRef();return this.stateChangeCallbacks.open.push([s,e]),s}onClose(e){let s=this.makeRef();return this.stateChangeCallbacks.close.push([s,e]),s}onError(e){let s=this.makeRef();return this.stateChangeCallbacks.error.push([s,e]),s}onMessage(e){let s=this.makeRef();return this.stateChangeCallbacks.message.push([s,e]),s}ping(e){if(!this.isConnected())return!1;let s=this.makeRef(),n=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:s});let i=this.onMessage(r=>{r.ref===s&&(this.off([i]),e(Date.now()-n))});return!0}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,s,n){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(s?this.conn.close(s,n||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,s=1){if(s===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,s+1)},150*s)}waitForSocketClosed(e,s=1){if(s===5||!this.conn||this.conn.readyState===C.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,s+1)},150*s)}onConnClose(e){let s=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearTimeout(this.heartbeatTimer),!this.closeWasClean&&s!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,n])=>n(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let s=this.transport,n=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,i])=>{i(e,s,n)}),(s===this.transport||n>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(k.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case C.connecting:return"connecting";case C.open:return"open";case C.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(s=>s.joinRef()!==e.joinRef())}off(e){for(let s in this.stateChangeCallbacks)this.stateChangeCallbacks[s]=this.stateChangeCallbacks[s].filter(([n])=>e.indexOf(n)===-1)}channel(e,s={}){let n=new Ns(e,s,this);return this.channels.push(n),n}push(e){if(this.hasLogger()){let{topic:s,event:n,payload:i,ref:r,join_ref:o}=e;this.log("push",`${s} ${n} (${o}, ${r})`,i)}this.isConnected()?this.encode(e,s=>this.conn.send(s)):this.sendBuffer.push(()=>this.encode(e,s=>this.conn.send(s)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}abnormalClose(e){this.closeWasClean=!1,this.isConnected()&&this.conn.close(Ls,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:i,payload:r,ref:o,join_ref:l}=s;o&&o===this.pendingHeartbeatRef&&(clearTimeout(this.heartbeatTimer),this.pendingHeartbeatRef=null,setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,r);for(let h=0;h<this.channels.length;h++){const a=this.channels[h];a.isMember(n,i,r,l)&&a.trigger(i,r,o,l)}for(let h=0;h<this.stateChangeCallbacks.message.length;h++){let[,a]=this.stateChangeCallbacks.message[h];a(s)}})}leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n.isJoined()||n.isJoining()));s&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),s.leave())}}const Hs="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=250,left=150,top=150",Bs="123",Us=36e6,Ds=50,Ws=5e4,zs=15,Gs="seo",Y=1,Js=3,Ks=42,Fs="programmes-radio.com",Vs="radio-addict.com",Se=zs*1e3,qs=()=>new Promise((t,e)=>{if(document.getElementById("hls-script")!==null){t();return}const n=document.createElement("script");n.type="text/javascript",n.id="hls-script",n.src="/js/hls.light.min.js",n.onload=t,n.onerror=e,document.body.appendChild(n)}),Xs=()=>new Promise((t,e)=>{if(document.getElementById("dash-script")!==null){t(!0);return}const n=document.createElement("script");n.type="text/javascript",n.id="dash-script",n.src="/js/dash.all.min.js",n.onload=t,n.onerror=e,document.body.appendChild(n)}),Ge=(t,e,s,n)=>{if(e==null)return;const i=new Date;if(i.getTime()-e.getTime()<Se)return;let r=`https://${apiUrl}/listening_session/`;s!==null&&(r+=s);const o={date_time_start:e.toISOString(),date_time_end:i.toISOString(),source:Gs,ctrl:Math.random()};return n===!0&&(o.ending=!0),t.includes("-")?o.stream_id=t:o.radio_stream_code_name=`${t}_main`,fetch(r,{method:s!==null?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(l=>l.json()).then(l=>typeof l.id<"u"?l:null)},Ys=(t,e)=>{if(!t||!t.includes("-"))return;const s=`https://${apiUrl}/stream_error/${t}`,n={};return e&&(n.error=e),fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>i.json())},Je=t=>{const e=document.getElementById("playing-alert");e&&(t===!0?e.classList.remove("d-none"):e.classList.add("d-none"))},ce=t=>{typeof appVolume<"u"&&(window.audio.volume=appVolume)},W=t=>{const e=document.getElementsByClassName("stream-title");if(!e||!e[0]||!e[0].dataset.title)return;let s="";t&&(s+=`♫ ${t} - `),document.title=`${s}${e[0].dataset.title}`},Zs=t=>{appEnv==="dev"&&t.includes("-")&&fetch(`https://${apiUrl}/config`,{headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e&&e.radio_browser_url&&fetch(`${e.radio_browser_url}/json/url/${t}`,{headers:{"User-Agent":isProgRadio?Fs:Vs}})}).catch(e=>{})};mt({hls:null,dash:null,socket:null,socketTimer:null,channels:{},playing:Y,song:null,cover:null,listeners:null,visibilityListeners:{},lastUpdated:null,radioId:null,playingStart:null,sessionId:null,listeningInterval:null,options:{webSocket:typeof appWebSocket<"u"?appWebSocket:!0,sendStatistics:typeof appSendStatistics<"u"?appSendStatistics:!0},play(t,e,s){if(s||(s={}),Je(!1),this.playing!==Y&&this.stop(),this.listeningInterval!==null&&(clearInterval(this.listeningInterval),this.listeningInterval=null),this.options.sendStatistics&&sendGaEvent("play","SSR",e,3),s.popup&&s.popup===!0){window.open(popupUrl.replace(Bs,e),"",Hs);return}this.playing=Ks,this.radioId=e,this.sessionId=null,this.playerStart=new Date,t.indexOf(".m3u8")!==-1||s.force_hls&&s.force_hls===!0?qs().then(()=>{Hls.isSupported()&&(window.audio=document.getElementById("videoplayer"),this.hls=new Hls,this.hls.attachMedia(window.audio),this.hls.on(Hls.Events.ERROR,(n,i)=>{i.fatal&&this.playingError(e,i.details)}),this.hls.on(Hls.Events.MEDIA_ATTACHED,()=>{this.hls.loadSource(t),this.hls.on(Hls.Events.MANIFEST_PARSED,()=>{ce(),window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)})})}))}):t.indexOf(".mpd")!==-1||s.force_mpd&&s.force_mpd===!0?Xs().then(()=>{window.audio=document.getElementById("videoplayer"),this.dash=dashjs.MediaPlayer().create(),this.dash.initialize(window.audio,t,!1),this.dash.on("error",()=>{this.playingError(e)}),this.dash.on("canPlay",()=>{ce(),window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)})})}):(window.audio=document.getElementById("videoplayer"),window.audio.src=t.trim(),ce(),window.audio.onerror=n=>{if(t.trim().substring(0,5)!=="https"){this.stop(),this.play(`${streamsProxy}?k=${streamsProxyKey}&stream=${t}`,e,s.topic,s.streamCodeName);return}this.playingError(e,n.target.error.message||null)},window.audio.play().then(()=>{this.playingStarted(s.topic?s.topic.trim():null,s.streamCodeName?s.streamCodeName.trim():null)}))},stop(){window.audio!==void 0&&window.audio!==null&&window.audio.pause(),this.listeningInterval!==null&&(clearInterval(this.listeningInterval),this.listeningInterval=null),this.hls!==null&&(this.hls.destroy(),this.hls=null),this.dash!==null&&(this.dash.destroy(),this.dash=null),window.audio=null,delete window.audio,this.playing!==!1&&this.options.sendStatistics&&(Ge(this.radioId,this.playingStart,this.sessionId,!0),sendGaEvent("stop","SSR",this.radioId,1)),this.playing=Y,this.radioId=null,this.listeningInterval=null,this.sessionId=null,this.playingStart=null},playingStarted(t,e){this.playing=Js,this.lastUpdated=new Date,this.playingStart=new Date,this.options.sendStatistics&&(this.listeningInterval=setInterval(()=>{Ge(this.radioId,this.playingStart,this.sessionId).then(s=>{s.id!==null&&(this.sessionId=s.id,this.playingStart=new Date(s.date_time_start))})},Se),setTimeout(()=>{Zs(this.radioId)},Se+500)),window.audio.addEventListener("timeupdate",()=>{this.lastUpdated=new Date}),t&&t.trim()!==""&&this.joinChannel(t.trim()),e&&e.trim()!==""&&this.joinChannel(`listeners:${e.trim()}`)},playingError(t,e){setTimeout(()=>{this.playing=Y,Je(!0),this.options.sendStatistics&&Ys(t,e)},2500)},connectSocket(){if(this.options.webSocket){if(!this.socket){const t={heartbeatIntervalMs:Ws,reconnectAfterMs:e=>e>=Ds?null:[1e3,5e3,1e4,15e3,2e4,25e3,5e4,1e5,2e5,5e5,1e6,2e6][e-1]||3e4};this.socket=new Ms(`wss://${apiUrl}/socket`,t),this.socket.onOpen(()=>{this.setSocketTimer()}),this.socket.onClose(()=>{this.song=null,this.cover=null,this.listeners=null,this.clearSocketTimer(),W(null)})}this.socket&&!this.socket.isConnected()&&this.socket.connect()}},setSocketTimer(){this.clearSocketTimer(),this.socketTimer=setTimeout(()=>{this.socket&&(this.socket.disconnect(),this.socketTimer=null)},Us)},clearSocketTimer(){this.socketTimer&&(clearTimeout(this.socketTimer),this.socketTimer=null)},joinChannel(t){this.options.webSocket&&(t.trim().startsWith("listeners:")&&!this.visibilityListeners[t]&&(this.visibilityListeners[t]=!0,document.addEventListener("visibilitychange",()=>{this.channels[t]&&document.hidden?(this.channels[t].leave(),delete this.channels[t],this.listeners=null):this.joinChannel(t)})),this.connectSocket(),!Object.prototype.hasOwnProperty.call(this.channels,t)&&(this.channels[t]=this.socket.channel(t,{}),this.channels[t].join().receive("error",e=>{t.startsWith("listeners:")?this.listeners=null:(this.song=null,this.cover=null,W(null))}).receive("timeout",()=>{t.startsWith("listeners:")?this.listeners=null:(this.song=null,this.cover=null,W(null))}),this.channels[t].on("playing",e=>{this.formatSong(e),W(this.song)}),this.channels[t].on("counter_update",e=>{this.formatListeners(e)}),this.channels[t].on("quit",()=>{this.song=null,this.cover=null,this.listeners=null,this.channels[t]=null,delete this.channels[t],W(null)})))},formatSong(t){if(!t===null||!t.song){this.song=null,this.cover=null;return}let e="",s=!1;t.song.artist!==void 0&&t.song.artist!==null&&t.song.artist!==""&&(e+=t.song.artist,s=!0),t.song.title!==void 0&&t.song.title!==null&&t.song.title!==""&&(s===!0&&(e+=" - "),e+=t.song.title),this.song=e===""?null:e,this.cover=t.song.cover_url?t.song.cover_url:null},formatListeners(t){if(!t||!t.listeners||!t.listeners===0){this.listeners=null;return}this.listeners=t.listeners}}).mount();
{% endverbatim %}
</script>
